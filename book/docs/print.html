<!DOCTYPE HTML>
<html lang="ru" class="navy sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SQL для разработки - Авторский курс</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="4-месячный интенсивный курс по SQL для разработчиков, аналитиков и специалистов смежных профессий">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/sql-playground.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "navy";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SQL для разработки - Авторский курс</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/username/sql-yaru" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sql-для-разработки---Авторский-курс"><a class="header" href="#sql-для-разработки---Авторский-курс">SQL для разработки - Авторский курс</a></h1>
<h2 id="Описание-курса"><a class="header" href="#Описание-курса">Описание курса</a></h2>
<p>4-месячный интенсивный курс по SQL для разработчиков, аналитиков и специалистов смежных профессий.</p>
<h2 id="Структура-курса"><a class="header" href="#Структура-курса">Структура курса</a></h2>
<h3 id="00-Введение-в-курс-30-минут"><a class="header" href="#00-Введение-в-курс-30-минут">00. Введение в курс (30 минут)</a></h3>
<ul>
<li>Знакомство с SQL в контексте разработки</li>
<li>Первые простые запросы</li>
</ul>
<h3 id="01-Основы-sql-и-баз-данных-4-недели-30-часов"><a class="header" href="#01-Основы-sql-и-баз-данных-4-недели-30-часов">01. Основы SQL и баз данных (4 недели, 30+ часов)</a></h3>
<ul>
<li>Устройство PostgreSQL</li>
<li>Основы SQL: DDL и DML</li>
<li>Нормализация БД и связи между таблицами</li>
<li><strong>Проект</strong>: База данных автосалона "Врум-Бум"</li>
</ul>
<h3 id="02-Продвинутый-sql-для-работы-с-данными-4-недели-30-часов"><a class="header" href="#02-Продвинутый-sql-для-работы-с-данными-4-недели-30-часов">02. Продвинутый SQL для работы с данными (4 недели, 30+ часов)</a></h3>
<ul>
<li>Подзапросы и CTE</li>
<li>Оконные функции</li>
<li>Представления и продвинутые типы данных</li>
<li>Геоданные и транзакции</li>
<li><strong>Проект</strong>: Система GastroHub (сеть ресторанов)</li>
</ul>
<h3 id="03-Серверное-программирование-на-sql-4-недели-30-часов"><a class="header" href="#03-Серверное-программирование-на-sql-4-недели-30-часов">03. Серверное программирование на SQL (4 недели, 30+ часов)</a></h3>
<ul>
<li>Процедуры и функции</li>
<li>PL/pgSQL</li>
<li>Триггеры</li>
<li><strong>Проект</strong>: Система управления персоналом Dream Big</li>
</ul>
<h3 id="04-Технология-orm-Оптимизация-запросов-4-недели-30-часов"><a class="header" href="#04-Технология-orm-Оптимизация-запросов-4-недели-30-часов">04. Технология ORM. Оптимизация запросов (4 недели, 30+ часов)</a></h3>
<ul>
<li>ORM и миграции</li>
<li>Оптимизация запросов</li>
<li>Индексы</li>
<li>Анализ планов выполнения</li>
<li><strong>Проект</strong>: Оптимизация сервиса доставки еды</li>
</ul>
<h2 id="Требования"><a class="header" href="#Требования">Требования</a></h2>
<ul>
<li>PostgreSQL 14+</li>
<li>pgAdmin или аналогичный инструмент</li>
<li>Базовые знания программирования (желательно)</li>
</ul>
<h2 id="Целевая-аудитория"><a class="header" href="#Целевая-аудитория">Целевая аудитория</a></h2>
<ul>
<li>Разработчики (начинающие и опытные)</li>
<li>Аналитики данных</li>
<li>DevOps, QA, Data Science специалисты</li>
<li>Инженеры техподдержки</li>
</ul>
<h2 id="По-завершении-курса-вы-сможете"><a class="header" href="#По-завершении-курса-вы-сможете">По завершении курса вы сможете:</a></h2>
<ul>
<li>✅ Создавать и изменять структуры БД под различные задачи</li>
<li>✅ Писать SQL-запросы любой сложности</li>
<li>✅ Проектировать эффективную архитектуру БД</li>
<li>✅ Переносить бизнес-логику на уровень базы данных</li>
<li>✅ Оптимизировать производительность запросов</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Демо-Интерактивные-sql-запросы"><a class="header" href="#Демо-Интерактивные-sql-запросы">Демо: Интерактивные SQL запросы</a></h1>
<p>Эта страница демонстрирует возможности выполнения SQL кода прямо в браузере.</p>
<h2 id="-Простые-запросы"><a class="header" href="#-Простые-запросы">🎯 Простые запросы</a></h2>
<h3 id="Просмотр-всех-сотрудников"><a class="header" href="#Просмотр-всех-сотрудников">Просмотр всех сотрудников</a></h3>
<pre><code class="language-sql runnable">SELECT * FROM employees;
</code></pre>
<h3 id="Фильтрация-по-отделу"><a class="header" href="#Фильтрация-по-отделу">Фильтрация по отделу</a></h3>
<pre><code class="language-sql runnable">SELECT first_name, last_name, department, salary 
FROM employees 
WHERE department = 'IT'
ORDER BY salary DESC;
</code></pre>
<h3 id="Агрегатные-функции"><a class="header" href="#Агрегатные-функции">Агрегатные функции</a></h3>
<pre><code class="language-sql runnable">SELECT 
    department,
    COUNT(*) as employee_count,
    AVG(salary) as avg_salary,
    MIN(salary) as min_salary,
    MAX(salary) as max_salary
FROM employees 
GROUP BY department 
ORDER BY avg_salary DESC;
</code></pre>
<h2 id="-Изменение-данных"><a class="header" href="#-Изменение-данных">🔧 Изменение данных</a></h2>
<h3 id="Добавление-нового-сотрудника"><a class="header" href="#Добавление-нового-сотрудника">Добавление нового сотрудника</a></h3>
<pre><code class="language-sql runnable">INSERT INTO employees (id, first_name, last_name, email, department, position, salary, hire_date, active) 
VALUES (99, 'Тест', 'Тестов', 'test@company.com', 'Testing', 'Тестировщик', 95000, '2024-06-02', 1);

-- Проверим результат
SELECT * FROM employees WHERE id = 99;
</code></pre>
<h3 id="Обновление-данных"><a class="header" href="#Обновление-данных">Обновление данных</a></h3>
<pre><code class="language-sql runnable">-- Повысим зарплату на 15% сотрудникам Marketing
UPDATE employees 
SET salary = salary * 1.15 
WHERE department = 'Marketing';

-- Посмотрим результат
SELECT first_name, last_name, department, salary 
FROM employees 
WHERE department = 'Marketing';
</code></pre>
<h3 id="Удаление-данных"><a class="header" href="#Удаление-данных">Удаление данных</a></h3>
<pre><code class="language-sql runnable">-- Удалим тестового сотрудника
DELETE FROM employees WHERE id = 99;

-- Проверим, что он удален
SELECT COUNT(*) as total_employees FROM employees;
</code></pre>
<h2 id="-Сложные-запросы"><a class="header" href="#-Сложные-запросы">📊 Сложные запросы</a></h2>
<h3 id="Подзапросы"><a class="header" href="#Подзапросы">Подзапросы</a></h3>
<pre><code class="language-sql runnable">-- Сотрудники с зарплатой выше средней
SELECT first_name, last_name, salary,
       (SELECT AVG(salary) FROM employees) as avg_salary
FROM employees 
WHERE salary &gt; (SELECT AVG(salary) FROM employees)
ORDER BY salary DESC;
</code></pre>
<h3 id="Работа-с-датами"><a class="header" href="#Работа-с-датами">Работа с датами</a></h3>
<pre><code class="language-sql runnable">-- Сотрудники, работающие больше 3 лет
SELECT first_name, last_name, hire_date,
       CASE 
           WHEN hire_date &lt; '2021-01-01' THEN 'Опытный'
           ELSE 'Новичок'
       END as experience_level
FROM employees 
ORDER BY hire_date;
</code></pre>
<h2 id="-Работа-с-несколькими-таблицами"><a class="header" href="#-Работа-с-несколькими-таблицами">🗂 Работа с несколькими таблицами</a></h2>
<h3 id="Информация-об-отделах"><a class="header" href="#Информация-об-отделах">Информация об отделах</a></h3>
<pre><code class="language-sql runnable">-- Сначала посмотрим на отделы
SELECT * FROM departments;
</code></pre>
<h3 id="join-операции-если-доступны"><a class="header" href="#join-операции-если-доступны">JOIN операции (если доступны)</a></h3>
<pre><code class="language-sql runnable">-- Попробуем объединить данные (может не работать в SQLite)
SELECT 
    e.first_name,
    e.last_name,
    e.department,
    d.description as dept_description,
    d.location
FROM employees e
LEFT JOIN departments d ON e.department = d.name
LIMIT 5;
</code></pre>
<h2 id="-Поэкспериментируйте"><a class="header" href="#-Поэкспериментируйте">🎮 Поэкспериментируйте!</a></h2>
<h3 id="Готовые-примеры-нажмите-Выполнить"><a class="header" href="#Готовые-примеры-нажмите-Выполнить">Готовые примеры (нажмите "Выполнить")</a></h3>
<pre><code class="language-sql runnable">-- Ваш запрос здесь
SELECT 'Привет, SQL!' as message;
</code></pre>
<h3 id="Редактируемая-песочница"><a class="header" href="#Редактируемая-песочница">Редактируемая песочница</a></h3>
<p>Здесь вы можете писать и изменять любые SQL запросы:</p>
<pre><code class="language-sql editable">-- Напишите ваш собственный запрос!
-- Попробуйте что-то интересное с таблицами employees и departments

SELECT * FROM employees LIMIT 3;
</code></pre>
<h3 id="Полезные-функции-для-экспериментов"><a class="header" href="#Полезные-функции-для-экспериментов">Полезные функции для экспериментов</a></h3>
<pre><code class="language-sql runnable">-- Функции работы со строками
SELECT 
    first_name,
    last_name,
    UPPER(first_name) as upper_name,
    LENGTH(email) as email_length,
    SUBSTR(email, 1, INSTR(email, '@') - 1) as username
FROM employees 
LIMIT 3;
</code></pre>
<h2 id="-Сброс-данных"><a class="header" href="#-Сброс-данных">🔄 Сброс данных</a></h2>
<p>Если что-то пошло не так, нажмите кнопку "🔄 Сбросить данные" под любым блоком, чтобы вернуть исходное состояние базы данных.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Структура-курса-sql-для-разработки"><a class="header" href="#Структура-курса-sql-для-разработки">Структура курса SQL для разработки</a></h1>
<h2 id="Организация-файлов-и-папок"><a class="header" href="#Организация-файлов-и-папок">Организация файлов и папок</a></h2>
<pre><code>sql-yaru/
├── README.md                     # Главная страница курса
├── docs/                        # Документация курса
│   ├── course-structure.md      # Этот файл
│   ├── installation-guide.md    # Инструкция по установке ПО
│   └── webinars-schedule.md     # Расписание вебинаров
├── assets/                      # Ресурсы курса
│   ├── images/                  # Изображения и диаграммы
│   └── datasets/                # Наборы данных для практики
├── scripts/                     # Вспомогательные скрипты
│   ├── setup-db.sql            # Скрипт инициализации БД
│   └── utils/                   # Утилиты
└── modules/                     # Модули курса
    ├── 00-introduction/         # Введение в курс
    ├── 01-sql-basics/           # Основы SQL и БД
    ├── 02-advanced-sql/         # Продвинутый SQL
    ├── 03-server-programming/   # Серверное программирование
    └── 04-orm-optimization/     # ORM и оптимизация
</code></pre>
<h2 id="Структура-каждого-модуля"><a class="header" href="#Структура-каждого-модуля">Структура каждого модуля</a></h2>
<pre><code>XX-module-name/
├── README.md                    # Обзор модуля
├── theory/                      # Теоретические материалы
│   ├── 01-topic-name.md        # Лекция 1
│   ├── 02-topic-name.md        # Лекция 2
│   └── ...
├── practice/                    # Практические задания
│   ├── exercises/              # Упражнения
│   │   ├── 01-exercise.md
│   │   ├── 01-exercise.sql
│   │   └── ...
│   └── solutions/              # Решения
│       ├── 01-solution.sql
│       └── ...
├── project/                     # Итоговый проект модуля
│   ├── README.md               # Описание проекта
│   ├── requirements.md         # Требования
│   ├── starter-code/           # Стартовый код
│   ├── datasets/               # Данные для проекта
│   └── solution/               # Эталонное решение
└── resources/                   # Дополнительные ресурсы
    ├── diagrams/               # ER-диаграммы, схемы
    ├── examples/               # Примеры кода
    └── references.md           # Ссылки и источники
</code></pre>
<h2 id="Детальное-содержание-модулей"><a class="header" href="#Детальное-содержание-модулей">Детальное содержание модулей</a></h2>
<h3 id="00-Введение-в-курс-30-минут-1"><a class="header" href="#00-Введение-в-курс-30-минут-1">00. Введение в курс (30 минут)</a></h3>
<p><strong>Цель</strong>: Познакомить с SQL в контексте разработки, показать практическую значимость</p>
<p><strong>Содержание</strong>:</p>
<ul>
<li>Зачем разработчику знать SQL</li>
<li>Обзор примеров использования в реальных проектах</li>
<li>Первые простые запросы</li>
<li>Знакомство с инструментами курса</li>
</ul>
<h3 id="01-Основы-sql-и-баз-данных-4-недели"><a class="header" href="#01-Основы-sql-и-баз-данных-4-недели">01. Основы SQL и баз данных (4 недели)</a></h3>
<p><strong>Цель</strong>: Заложить фундамент понимания реляционных БД и основ SQL</p>
<p><strong>Теория</strong>:</p>
<ol>
<li>Устройство PostgreSQL</li>
<li>Основы SQL: DDL (CREATE, ALTER, DROP)</li>
<li>Основы SQL: DML (INSERT, SELECT, UPDATE, DELETE)</li>
<li>Нормализация БД и связи между таблицами</li>
<li>Работа со связанными таблицами (JOIN)</li>
<li>Функции для обработки данных</li>
</ol>
<p><strong>Проект</strong>: База данных автосалона "Врум-Бум"</p>
<ul>
<li>Проектирование схемы БД</li>
<li>Загрузка данных из CSV</li>
<li>Нормализация структуры</li>
<li>Создание аналитических запросов</li>
</ul>
<h3 id="02-Продвинутый-sql-для-работы-с-данными-4-недели"><a class="header" href="#02-Продвинутый-sql-для-работы-с-данными-4-недели">02. Продвинутый SQL для работы с данными (4 недели)</a></h3>
<p><strong>Цель</strong>: Освоить сложные конструкции SQL для решения нестандартных задач</p>
<p><strong>Теория</strong>:</p>
<ol>
<li>Подзапросы и общие табличные выражения (CTE)</li>
<li>Оконные функции</li>
<li>Представления (Views и Materialized Views)</li>
<li>Продвинутые типы данных: UUID, массивы, JSON</li>
<li>Геоданные и PostGIS</li>
<li>Транзакции и блокировки</li>
</ol>
<p><strong>Проект</strong>: Система GastroHub (сеть ресторанов)</p>
<ul>
<li>Работа с геоданными</li>
<li>Построение аналитических запросов</li>
<li>Использование оконных функций</li>
<li>Создание представлений</li>
</ul>
<h3 id="03-Серверное-программирование-на-sql-4-недели"><a class="header" href="#03-Серверное-программирование-на-sql-4-недели">03. Серверное программирование на SQL (4 недели)</a></h3>
<p><strong>Цель</strong>: Научиться переносить бизнес-логику на уровень БД</p>
<p><strong>Теория</strong>:</p>
<ol>
<li>Введение в серверное программирование</li>
<li>Создание процедур и функций</li>
<li>Параметры подпрограмм</li>
<li>PL/pgSQL: управляющие конструкции</li>
<li>Триггеры</li>
</ol>
<p><strong>Проект</strong>: Система управления персоналом Dream Big</p>
<ul>
<li>Автоматизация HR-процессов</li>
<li>Создание пользовательских функций</li>
<li>Реализация триггеров</li>
<li>Обработка исключений</li>
</ul>
<h3 id="04-Технология-orm-Оптимизация-запросов-4-недели"><a class="header" href="#04-Технология-orm-Оптимизация-запросов-4-недели">04. Технология ORM. Оптимизация запросов (4 недели)</a></h3>
<p><strong>Цель</strong>: Изучить современные подходы к работе с БД и оптимизации</p>
<p><strong>Теория</strong>:</p>
<ol>
<li>Технология ORM и миграции</li>
<li>Общие подходы к оптимизации</li>
<li>Оптимизация через перестройку запросов</li>
<li>Индексы как способ ускорения запросов</li>
<li>Чтение и анализ плана запроса</li>
</ol>
<p><strong>Проект</strong>: Оптимизация сервиса доставки еды</p>
<ul>
<li>Анализ медленных запросов</li>
<li>Создание эффективных индексов</li>
<li>Перестройка запросов</li>
<li>Мониторинг производительности</li>
</ul>
<h2 id="Дополнительные-материалы"><a class="header" href="#Дополнительные-материалы">Дополнительные материалы</a></h2>
<h3 id="Вебинары"><a class="header" href="#Вебинары">Вебинары</a></h3>
<ul>
<li>1 вебинар на модуль</li>
<li>Разбор сложных тем</li>
<li>Ответы на вопросы студентов</li>
<li>Обсуждение реальных кейсов</li>
</ul>
<h3 id="Ресурсы"><a class="header" href="#Ресурсы">Ресурсы</a></h3>
<ul>
<li>Справочник по SQL</li>
<li>Шпаргалки по PostgreSQL</li>
<li>Примеры из реальных проектов</li>
<li>Дополнительные задачи для самостоятельной работы</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Инструкция-по-установке-и-настройке-среды"><a class="header" href="#Инструкция-по-установке-и-настройке-среды">Инструкция по установке и настройке среды</a></h1>
<h2 id="Необходимое-программное-обеспечение"><a class="header" href="#Необходимое-программное-обеспечение">Необходимое программное обеспечение</a></h2>
<h3 id="1-postgresql-версия-14-или-выше"><a class="header" href="#1-postgresql-версия-14-или-выше">1. PostgreSQL (версия 14 или выше)</a></h3>
<h4 id="windows"><a class="header" href="#windows">Windows</a></h4>
<ol>
<li>Скачайте установщик с официального сайта: https://www.postgresql.org/download/windows/</li>
<li>Запустите установщик и следуйте инструкциям</li>
<li><strong>Важно</strong>: Запомните пароль для пользователя <code>postgres</code></li>
<li>Оставьте порт по умолчанию (5432)</li>
<li>При выборе компонентов убедитесь, что выбраны:
<ul>
<li>PostgreSQL Server</li>
<li>pgAdmin 4</li>
<li>Command Line Tools</li>
</ul>
</li>
</ol>
<h4 id="macos"><a class="header" href="#macos">macOS</a></h4>
<pre><code class="language-bash"># Используя Homebrew (рекомендуется)
brew install postgresql
brew install --cask pgadmin4

# Запуск службы PostgreSQL
brew services start postgresql

# Создание пользователя (если нужно)
createuser -s postgres
</code></pre>
<h4 id="linux-ubuntudebian"><a class="header" href="#linux-ubuntudebian">Linux (Ubuntu/Debian)</a></h4>
<pre><code class="language-bash"># Обновление пакетов
sudo apt update

# Установка PostgreSQL
sudo apt install postgresql postgresql-contrib

# Запуск службы
sudo systemctl start postgresql
sudo systemctl enable postgresql

# Установка pgAdmin (опционально)
sudo apt install pgadmin4
</code></pre>
<h3 id="2-pgadmin-4-gui-клиент"><a class="header" href="#2-pgadmin-4-gui-клиент">2. pgAdmin 4 (GUI-клиент)</a></h3>
<p>Если не установился вместе с PostgreSQL:</p>
<ul>
<li>Windows/macOS: https://www.pgadmin.org/download/</li>
<li>Linux: <code>sudo apt install pgadmin4</code> или используйте веб-версию</li>
</ul>
<h3 id="3-Альтернативные-клиенты-опционально"><a class="header" href="#3-Альтернативные-клиенты-опционально">3. Альтернативные клиенты (опционально)</a></h3>
<h4 id="Консольный-клиент-psql"><a class="header" href="#Консольный-клиент-psql">Консольный клиент psql</a></h4>
<p>Устанавливается вместе с PostgreSQL. Запуск:</p>
<pre><code class="language-bash">psql -U postgres -h localhost
</code></pre>
<h4 id="Другие-gui-клиенты"><a class="header" href="#Другие-gui-клиенты">Другие GUI-клиенты</a></h4>
<ul>
<li><strong>DBeaver</strong> (бесплатный, кроссплатформенный)</li>
<li><strong>DataGrip</strong> (платный, от JetBrains)</li>
<li><strong>Navicat</strong> (платный)</li>
</ul>
<h2 id="Настройка-базы-данных-для-курса"><a class="header" href="#Настройка-базы-данных-для-курса">Настройка базы данных для курса</a></h2>
<h3 id="1-Первое-подключение"><a class="header" href="#1-Первое-подключение">1. Первое подключение</a></h3>
<h4 id="Через-pgadmin"><a class="header" href="#Через-pgadmin">Через pgAdmin</a></h4>
<ol>
<li>Откройте pgAdmin 4</li>
<li>Создайте новое подключение:
<ul>
<li>Host: <code>localhost</code></li>
<li>Port: <code>5432</code></li>
<li>Username: <code>postgres</code></li>
<li>Password: [ваш пароль]</li>
</ul>
</li>
</ol>
<h4 id="Через-psql"><a class="header" href="#Через-psql">Через psql</a></h4>
<pre><code class="language-bash">psql -U postgres -h localhost
</code></pre>
<h3 id="2-Создание-базы-данных-для-курса"><a class="header" href="#2-Создание-базы-данных-для-курса">2. Создание базы данных для курса</a></h3>
<pre><code class="language-sql">-- Создание базы данных
CREATE DATABASE sql_course;

-- Подключение к базе данных
\c sql_course;

-- Проверка подключения
SELECT current_database();
</code></pre>
<h3 id="3-Создание-пользователя-для-работы"><a class="header" href="#3-Создание-пользователя-для-работы">3. Создание пользователя для работы</a></h3>
<pre><code class="language-sql">-- Создание пользователя
CREATE USER course_student WITH PASSWORD 'student123';

-- Предоставление прав
GRANT ALL PRIVILEGES ON DATABASE sql_course TO course_student;

-- Для PostgreSQL 15+ дополнительно нужно:
\c sql_course;
GRANT ALL ON SCHEMA public TO course_student;
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO course_student;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO course_student;
</code></pre>
<h2 id="Установка-демонстрационной-базы-данных"><a class="header" href="#Установка-демонстрационной-базы-данных">Установка демонстрационной базы данных</a></h2>
<h3 id="Вариант-1-Использование-готового-дампа"><a class="header" href="#Вариант-1-Использование-готового-дампа">Вариант 1: Использование готового дампа</a></h3>
<pre><code class="language-bash"># Скачивание демо-данных (будет создан позже)
wget https://github.com/[your_repo]/sql-yaru/raw/main/assets/datasets/demo_db.sql

# Восстановление из дампа
psql -U postgres -d sql_course -f demo_db.sql
</code></pre>
<h3 id="Вариант-2-Создание-тестовых-данных-вручную"><a class="header" href="#Вариант-2-Создание-тестовых-данных-вручную">Вариант 2: Создание тестовых данных вручную</a></h3>
<pre><code class="language-sql">-- Подключение к базе курса
\c sql_course;

-- Создание простой таблицы для первых экспериментов
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    department VARCHAR(50),
    salary DECIMAL(10, 2),
    hire_date DATE DEFAULT CURRENT_DATE
);

-- Вставка тестовых данных
INSERT INTO employees (first_name, last_name, email, department, salary) VALUES
    ('Иван', 'Петров', 'ivan.petrov@company.com', 'IT', 80000),
    ('Мария', 'Сидорова', 'maria.sidorova@company.com', 'HR', 65000),
    ('Алексей', 'Иванов', 'alexey.ivanov@company.com', 'IT', 90000),
    ('Елена', 'Козлова', 'elena.kozlova@company.com', 'Marketing', 70000),
    ('Дмитрий', 'Смирнов', 'dmitry.smirnov@company.com', 'Finance', 75000);

-- Проверка создания данных
SELECT * FROM employees;
</code></pre>
<h2 id="Проверка-установки"><a class="header" href="#Проверка-установки">Проверка установки</a></h2>
<h3 id="Тест-подключения-и-основных-операций"><a class="header" href="#Тест-подключения-и-основных-операций">Тест подключения и основных операций</a></h3>
<pre><code class="language-sql">-- 1. Проверка версии PostgreSQL
SELECT version();

-- 2. Проверка текущей базы данных
SELECT current_database();

-- 3. Проверка списка таблиц
\dt

-- 4. Простой запрос к данным
SELECT COUNT(*) FROM employees;

-- 5. Проверка расширений PostgreSQL
SELECT * FROM pg_available_extensions WHERE name LIKE '%postgis%';
</code></pre>
<h3 id="Ожидаемые-результаты"><a class="header" href="#Ожидаемые-результаты">Ожидаемые результаты</a></h3>
<ul>
<li>✅ PostgreSQL версии 14+ установлен и запущен</li>
<li>✅ База данных <code>sql_course</code> создана</li>
<li>✅ Пользователь <code>course_student</code> создан с необходимыми правами</li>
<li>✅ Тестовая таблица <code>employees</code> создана и содержит данные</li>
<li>✅ pgAdmin или другой клиент успешно подключается</li>
</ul>
<h2 id="Решение-частых-проблем"><a class="header" href="#Решение-частых-проблем">Решение частых проблем</a></h2>
<h3 id="Проблема-could-not-connect-to-server"><a class="header" href="#Проблема-could-not-connect-to-server">Проблема: "Could not connect to server"</a></h3>
<p><strong>Решение</strong>:</p>
<ol>
<li>Проверьте, что служба PostgreSQL запущена</li>
<li>Убедитесь в правильности порта (обычно 5432)</li>
<li>Проверьте настройки файрвола</li>
</ol>
<h3 id="Проблема-authentication-failed"><a class="header" href="#Проблема-authentication-failed">Проблема: "authentication failed"</a></h3>
<p><strong>Решение</strong>:</p>
<ol>
<li>Проверьте правильность пароля</li>
<li>Убедитесь, что используете правильное имя пользователя</li>
<li>Проверьте файл <code>pg_hba.conf</code> (для продвинутых пользователей)</li>
</ol>
<h3 id="Проблема-permission-denied"><a class="header" href="#Проблема-permission-denied">Проблема: "permission denied"</a></h3>
<p><strong>Решение</strong>:</p>
<ol>
<li>Убедитесь, что пользователь имеет права на базу данных</li>
<li>Выполните команды предоставления прав из раздела настройки</li>
</ol>
<h3 id="Проблема-postgresql-не-запускается"><a class="header" href="#Проблема-postgresql-не-запускается">Проблема: PostgreSQL не запускается</a></h3>
<p><strong>Решение</strong>:</p>
<ul>
<li>Windows: Проверьте службы Windows (services.msc)</li>
<li>macOS: <code>brew services restart postgresql</code></li>
<li>Linux: <code>sudo systemctl restart postgresql</code></li>
</ul>
<h2 id="Дополнительные-настройки-для-курса"><a class="header" href="#Дополнительные-настройки-для-курса">Дополнительные настройки для курса</a></h2>
<h3 id="Установка-расширения-postgis-для-модуля-02"><a class="header" href="#Установка-расширения-postgis-для-модуля-02">Установка расширения PostGIS (для модуля 02)</a></h3>
<pre><code class="language-sql">-- Подключение как суперпользователь
\c sql_course postgres;

-- Создание расширения
CREATE EXTENSION IF NOT EXISTS postgis;

-- Проверка установки
SELECT PostGIS_Version();
</code></pre>
<h3 id="Настройки-производительности-для-обучения"><a class="header" href="#Настройки-производительности-для-обучения">Настройки производительности для обучения</a></h3>
<pre><code class="language-sql">-- Включение отображения времени выполнения запросов
\timing

-- Включение подробного вывода планов запросов
SET work_mem = '4MB';
SET shared_buffers = '128MB';
</code></pre>
<h2 id="Готовность-к-курсу"><a class="header" href="#Готовность-к-курсу">Готовность к курсу</a></h2>
<p>После выполнения всех шагов у вас должно быть:</p>
<ul>
<li>✅ Установленный и настроенный PostgreSQL</li>
<li>✅ Рабочий GUI-клиент (pgAdmin или аналог)</li>
<li>✅ База данных <code>sql_course</code> с тестовыми данными</li>
<li>✅ Понимание базовых команд подключения и проверки</li>
</ul>
<p><strong>Поздравляем! Вы готовы к изучению SQL! 🎉</strong></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-Руководство-по-интерактивным-sql-блокам"><a class="header" href="#-Руководство-по-интерактивным-sql-блокам">🎮 Руководство по интерактивным SQL блокам</a></h1>
<h2 id="Обзор"><a class="header" href="#Обзор">Обзор</a></h2>
<p>Курс поддерживает два типа интерактивных SQL блоков:</p>
<h3 id="1-Готовые-примеры-sqlrunnable"><a class="header" href="#1-Готовые-примеры-sqlrunnable">1. Готовые примеры (<code>sql,runnable</code>)</a></h3>
<ul>
<li><strong>Назначение</strong>: Демонстрация готовых решений</li>
<li><strong>Поведение</strong>: Код нельзя редактировать, только выполнять</li>
<li><strong>Использование</strong>: Примеры, эталонные решения</li>
</ul>
<h3 id="2-Редактируемые-блоки-sqleditable"><a class="header" href="#2-Редактируемые-блоки-sqleditable">2. Редактируемые блоки (<code>sql,editable</code>)</a></h3>
<ul>
<li><strong>Назначение</strong>: Практические упражнения для студентов</li>
<li><strong>Поведение</strong>: Код можно изменять и выполнять</li>
<li><strong>Использование</strong>: Домашние задания, эксперименты</li>
</ul>
<h2 id="-Синтаксис"><a class="header" href="#-Синтаксис">📝 Синтаксис</a></h2>
<h3 id="Готовый-пример"><a class="header" href="#Готовый-пример">Готовый пример</a></h3>
<pre><code class="language-markdown">```sql,runnable
SELECT * FROM employees WHERE department = 'IT';
</code></pre>
<h3 id="Редактируемый-блок"><a class="header" href="#Редактируемый-блок">Редактируемый блок</a></h3>
<pre><code class="language-markdown">```sql,editable
-- Студент может изменить этот код
SELECT first_name, last_name FROM employees;
</code></pre>
<pre><code>
## 🎯 Возможности

### Выполнение запросов
- ✅ **SELECT** - просмотр данных с результатами в таблице
- ✅ **INSERT** - добавление записей  
- ✅ **UPDATE** - изменение данных
- ✅ **DELETE** - удаление записей
- ✅ **CREATE TABLE** - создание таблиц
- ✅ **DROP TABLE** - удаление таблиц

### Множественные запросы
```sql
INSERT INTO employees VALUES (99, 'Тест', 'Тестов', 'test@test.com', 'IT', 'Developer', 100000, '2024-01-01', NULL, 1);
SELECT * FROM employees WHERE id = 99;
DELETE FROM employees WHERE id = 99;
</code></pre>
<h3 id="Управление-состоянием"><a class="header" href="#Управление-состоянием">Управление состоянием</a></h3>
<ul>
<li>🔄 <strong>Сброс данных</strong> - возврат к исходному состоянию</li>
<li>🗑 <strong>Очистка кода</strong> (только для editable) - очистка редактора</li>
</ul>
<h2 id="-Предустановленные-данные"><a class="header" href="#-Предустановленные-данные">📊 Предустановленные данные</a></h2>
<h3 id="Таблица-employees"><a class="header" href="#Таблица-employees">Таблица <code>employees</code></a></h3>
<pre><code class="language-sql">CREATE TABLE employees (
    id INTEGER PRIMARY KEY,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL,
    department TEXT,
    position TEXT,
    salary DECIMAL(10, 2),
    hire_date DATE,
    manager_id INTEGER,
    active BOOLEAN DEFAULT 1
);
</code></pre>
<p><strong>Данные</strong>: 10 сотрудников из отделов IT, HR, Marketing, Finance, Sales</p>
<h3 id="Таблица-departments"><a class="header" href="#Таблица-departments">Таблица <code>departments</code></a></h3>
<pre><code class="language-sql">CREATE TABLE departments (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT,
    budget DECIMAL(12, 2),
    location TEXT
);
</code></pre>
<p><strong>Данные</strong>: 5 отделов с бюджетами и локациями</p>
<h2 id="-Визуальные-различия"><a class="header" href="#-Визуальные-различия">🎨 Визуальные различия</a></h2>
<h3 id="Готовые-примеры"><a class="header" href="#Готовые-примеры">Готовые примеры</a></h3>
<ul>
<li>Обычная серая рамка</li>
<li>Кнопки: "▶ Выполнить SQL", "🔄 Сбросить данные"</li>
</ul>
<h3 id="Редактируемые-блоки"><a class="header" href="#Редактируемые-блоки">Редактируемые блоки</a></h3>
<ul>
<li>Синяя рамка и светло-голубой фон</li>
<li>Текстовое поле для редактирования</li>
<li>Кнопки: "▶ Выполнить SQL", "🔄 Сбросить данные", "🗑 Очистить код"</li>
</ul>
<h2 id="-Педагогические-сценарии"><a class="header" href="#-Педагогические-сценарии">🚀 Педагогические сценарии</a></h2>
<h3 id="Обучение-основам-модуль-00-01"><a class="header" href="#Обучение-основам-модуль-00-01">Обучение основам (модуль 00-01)</a></h3>
<pre><code class="language-markdown">### Пример: SELECT запрос
```sql,runnable
SELECT first_name, last_name, salary FROM employees ORDER BY salary DESC;
</code></pre>
<h3 id="Ваша-очередь"><a class="header" href="#Ваша-очередь">Ваша очередь!</a></h3>
<p>Попробуйте найти всех сотрудников IT отдела:</p>
<pre><code class="language-sql editable">-- Напишите запрос здесь
SELECT * FROM employees WHERE department = 'IT';
</code></pre>
<pre><code>
### Практические упражнения (модуль 02-03)
```markdown
### Задание: Напишите CTE запрос
```sql,editable
-- Создайте CTE для подсчета средней зарплаты по отделам
-- и выведите отделы с зарплатой выше общей средней

</code></pre>
<pre><code>
### Демонстрация сложного кода (модуль 04)
```markdown
### Анализ производительности (только демонстрация)
```sql,runnable
-- Этот запрос показывает использование индексов
EXPLAIN QUERY PLAN 
SELECT * FROM employees WHERE salary &gt; 100000;
</code></pre>
<h3 id="Свободная-практика"><a class="header" href="#Свободная-практика">Свободная практика</a></h3>
<pre><code class="language-sql editable">-- Экспериментируйте с любыми запросами!

</code></pre>
<pre><code>
## ⚠️ Ограничения

### SQLite vs PostgreSQL
- **Работает**: Базовые операции SQL (SELECT, INSERT, UPDATE, DELETE, JOIN)
- **Не работает**: PostgreSQL-специфичные функции (UUID, JSONB, PostGIS, PL/pgSQL)
- **Ограничено**: Процедуры, триггеры, расширенные типы данных

### Рекомендации по модулям
- **Модули 00-01**: ✅ Полная совместимость
- **Модуль 02**: ⚠️ Большинство функций работает  
- **Модули 03-04**: ❌ Ограниченная совместимость

## 🔧 Настройка

### Добавление новых таблиц
Отредактируйте `book/theme/sql-playground.js`:
```javascript
const setupSQL = `
    -- Ваши таблицы
    CREATE TABLE products (
        id INTEGER PRIMARY KEY,
        name TEXT NOT NULL,
        price DECIMAL(10,2)
    );
`;
</code></pre>
<h3 id="Кастомизация-стилей"><a class="header" href="#Кастомизация-стилей">Кастомизация стилей</a></h3>
<p>Отредактируйте <code>book/theme/sql-playground.css</code>:</p>
<pre><code class="language-css">.sql-playground.editable {
    border-color: #your-color;
}
</code></pre>
<h2 id="-Лучшие-практики"><a class="header" href="#-Лучшие-практики">🎯 Лучшие практики</a></h2>
<h3 id="Для-авторов-курса"><a class="header" href="#Для-авторов-курса">Для авторов курса</a></h3>
<ol>
<li><strong>Используйте <code>runnable</code></strong> для демонстрации решений</li>
<li><strong>Используйте <code>editable</code></strong> для практических заданий</li>
<li><strong>Добавляйте комментарии</strong> в коде для подсказок</li>
<li><strong>Предоставляйте примеры</strong> правильных запросов в комментариях</li>
</ol>
<h3 id="Для-студентов"><a class="header" href="#Для-студентов">Для студентов</a></h3>
<ol>
<li><strong>Читайте комментарии</strong> в коде - там могут быть подсказки</li>
<li><strong>Экспериментируйте</strong> - данные можно сбросить кнопкой</li>
<li><strong>Используйте точки с запятой</strong> для множественных запросов</li>
<li><strong>Сохраняйте интересные запросы</strong> - скопируйте в свои заметки</li>
</ol>
<hr />
<p><strong>Интерактивные SQL блоки делают обучение более эффективным и увлекательным! 🚀</strong></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Расписание-вебинаров"><a class="header" href="#Расписание-вебинаров">Расписание вебинаров</a></h1>
<h2 id="Формат-вебинаров"><a class="header" href="#Формат-вебинаров">Формат вебинаров</a></h2>
<ul>
<li><strong>Длительность</strong>: 90 минут (60 минут лекция + 30 минут Q&amp;A)</li>
<li><strong>Время</strong>: по воскресеньям в 19:00 МСК</li>
<li><strong>Платформа</strong>: Zoom (ссылка будет отправлена зарегистрированным участникам)</li>
<li><strong>Запись</strong>: Все вебинары записываются и доступны 24/7</li>
</ul>
<h2 id="График-на-4-месяца"><a class="header" href="#График-на-4-месяца">График на 4 месяца</a></h2>
<h3 id="Модуль-00-Введение-в-курс"><a class="header" href="#Модуль-00-Введение-в-курс">Модуль 00: Введение в курс</a></h3>
<p><strong>Вебинар #0 - Вводный</strong></p>
<ul>
<li><strong>Дата</strong>: 7 января 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Знакомство с курсом, мотивация, первые запросы</li>
<li><strong>Спикер</strong>: Егор Полетайкин</li>
<li><strong>Программа</strong>:
<ul>
<li>Обзор курса и ожидаемых результатов</li>
<li>Настройка рабочего окружения</li>
<li>Демонстрация возможностей SQL</li>
<li>Ответы на вопросы</li>
</ul>
</li>
</ul>
<hr />
<h3 id="Модуль-01-Основы-sql-и-баз-данных-4-недели"><a class="header" href="#Модуль-01-Основы-sql-и-баз-данных-4-недели">Модуль 01: Основы SQL и баз данных (4 недели)</a></h3>
<p><strong>Вебинар #1 - Основы PostgreSQL и DDL</strong></p>
<ul>
<li><strong>Дата</strong>: 14 января 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Архитектура PostgreSQL, создание таблиц и связей</li>
<li><strong>Программа</strong>:
<ul>
<li>Устройство PostgreSQL изнутри</li>
<li>DDL команды на практике</li>
<li>Проектирование схемы БД</li>
<li>Разбор типичных ошибок</li>
</ul>
</li>
</ul>
<p><strong>Вебинар #2 - Сложные запросы и JOIN</strong></p>
<ul>
<li><strong>Дата</strong>: 28 января 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Многотабличные запросы, различные типы JOIN</li>
<li><strong>Программа</strong>:
<ul>
<li>Виды JOIN операций с примерами</li>
<li>Оптимизация многотабличных запросов</li>
<li>Практические кейсы из реальных проектов</li>
<li>Проект "Автосалон Врум-Бум" - разбор решений</li>
</ul>
</li>
</ul>
<hr />
<h3 id="Модуль-02-Продвинутый-sql-4-недели"><a class="header" href="#Модуль-02-Продвинутый-sql-4-недели">Модуль 02: Продвинутый SQL (4 недели)</a></h3>
<p><strong>Вебинар #3 - Подзапросы и CTE</strong></p>
<ul>
<li><strong>Дата</strong>: 11 февраля 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Сложная логика в SQL, оптимизация вложенных запросов</li>
<li><strong>Программа</strong>:
<ul>
<li>Подзапросы vs JOIN - когда что использовать</li>
<li>Common Table Expressions (CTE)</li>
<li>Рекурсивные CTE</li>
<li>Производительность сложных запросов</li>
</ul>
</li>
</ul>
<p><strong>Вебинар #4 - Оконные функции</strong></p>
<ul>
<li><strong>Дата</strong>: 25 февраля 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Аналитические функции для сложных расчетов</li>
<li><strong>Программа</strong>:
<ul>
<li>Введение в оконные функции</li>
<li>PARTITION BY и ORDER BY в окнах</li>
<li>Практические примеры: ранжирование, накопительные суммы</li>
<li>Проект "GastroHub" - разбор аналитических запросов</li>
</ul>
</li>
</ul>
<hr />
<h3 id="Модуль-03-Серверное-программирование-4-недели"><a class="header" href="#Модуль-03-Серверное-программирование-4-недели">Модуль 03: Серверное программирование (4 недели)</a></h3>
<p><strong>Вебинар #5 - Процедуры и функции</strong></p>
<ul>
<li><strong>Дата</strong>: 10 марта 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Бизнес-логика на уровне базы данных</li>
<li><strong>Программа</strong>:
<ul>
<li>Функции vs процедуры в PostgreSQL</li>
<li>PL/pgSQL основы</li>
<li>Обработка ошибок и исключений</li>
<li>Лучшие практики серверного программирования</li>
</ul>
</li>
</ul>
<p><strong>Вебинар #6 - Триггеры и автоматизация</strong></p>
<ul>
<li><strong>Дата</strong>: 24 марта 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Автоматическая обработка данных</li>
<li><strong>Программа</strong>:
<ul>
<li>Виды триггеров и их применение</li>
<li>Аудит данных через триггеры</li>
<li>Автоматическое обновление связанных данных</li>
<li>Проект "Dream Big HR" - автоматизация HR процессов</li>
</ul>
</li>
</ul>
<hr />
<h3 id="Модуль-04-orm-и-оптимизация-4-недели"><a class="header" href="#Модуль-04-orm-и-оптимизация-4-недели">Модуль 04: ORM и оптимизация (4 недели)</a></h3>
<p><strong>Вебинар #7 - Индексы и производительность</strong></p>
<ul>
<li><strong>Дата</strong>: 7 апреля 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Оптимизация запросов и настройка производительности</li>
<li><strong>Программа</strong>:
<ul>
<li>Типы индексов в PostgreSQL</li>
<li>Анализ планов выполнения</li>
<li>Мониторинг производительности</li>
<li>Настройка конфигурации PostgreSQL</li>
</ul>
</li>
</ul>
<p><strong>Вебинар #8 - ORM и финальный проект</strong></p>
<ul>
<li><strong>Дата</strong>: 21 апреля 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Интеграция SQL с современными технологиями</li>
<li><strong>Программа</strong>:
<ul>
<li>ORM vs нативный SQL</li>
<li>Миграции и управление схемой</li>
<li>Проект "Оптимизация доставки" - разбор решений</li>
<li>Подведение итогов курса</li>
</ul>
</li>
</ul>
<hr />
<h2 id="Дополнительные-мероприятия"><a class="header" href="#Дополнительные-мероприятия">Дополнительные мероприятия</a></h2>
<h3 id="Мастер-классы-опционально"><a class="header" href="#Мастер-классы-опционально">Мастер-классы (опционально)</a></h3>
<p><strong>Продвинутый PostgreSQL</strong></p>
<ul>
<li><strong>Дата</strong>: 5 мая 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Расширения PostgreSQL, работа с JSON, полнотекстовый поиск</li>
<li><strong>Для кого</strong>: Выпускники курса</li>
</ul>
<p><strong>Карьера SQL-разработчика</strong></p>
<ul>
<li><strong>Дата</strong>: 12 мая 2024, 19:00 МСК</li>
<li><strong>Тема</strong>: Подготовка к собеседованиям, карьерные перспективы</li>
<li><strong>Приглашенные спикеры</strong>: HR и технические лиды из IT-компаний</li>
</ul>
<h3 id="Групповые-консультации"><a class="header" href="#Групповые-консультации">Групповые консультации</a></h3>
<ul>
<li><strong>Расписание</strong>: каждую среду в 20:00 МСК</li>
<li><strong>Формат</strong>: Решение задач, разбор сложных моментов</li>
<li><strong>Длительность</strong>: 60 минут</li>
</ul>
<h2 id="Как-участвовать"><a class="header" href="#Как-участвовать">Как участвовать</a></h2>
<h3 id="Подготовка-к-вебинару"><a class="header" href="#Подготовка-к-вебинару">Подготовка к вебинару</a></h3>
<ol>
<li>Изучите материалы соответствующего модуля</li>
<li>Выполните практические задания</li>
<li>Подготовьте вопросы заранее</li>
</ol>
<h3 id="Во-время-вебинара"><a class="header" href="#Во-время-вебинара">Во время вебинара</a></h3>
<ul>
<li>Используйте чат для вопросов</li>
<li>Активно участвуйте в опросах</li>
<li>Делайте заметки - записи доступны не сразу</li>
</ul>
<h3 id="После-вебинара"><a class="header" href="#После-вебинара">После вебинара</a></h3>
<ul>
<li>Запись появится в течение 24 часов</li>
<li>Дополнительные материалы отправляются на email</li>
<li>Продолжайте обсуждение в чате курса</li>
</ul>
<h2 id="Технические-требования"><a class="header" href="#Технические-требования">Технические требования</a></h2>
<h3 id="Для-участия-в-вебинаре"><a class="header" href="#Для-участия-в-вебинаре">Для участия в вебинаре</a></h3>
<ul>
<li>Стабильное интернет-соединение</li>
<li>Zoom клиент (веб-версия может работать нестабильно)</li>
<li>Желательно: наушники для лучшего качества звука</li>
</ul>
<h3 id="Для-практической-работы"><a class="header" href="#Для-практической-работы">Для практической работы</a></h3>
<ul>
<li>PostgreSQL 14+ установленный локально</li>
<li>pgAdmin или другой SQL клиент</li>
<li>Доступ к материалам курса</li>
</ul>
<h2 id="Часто-задаваемые-вопросы-о-вебинарах"><a class="header" href="#Часто-задаваемые-вопросы-о-вебинарах">Часто задаваемые вопросы о вебинарах</a></h2>
<h3 id="Что-делать-если-не-могу-присутствовать"><a class="header" href="#Что-делать-если-не-могу-присутствовать">Что делать, если не могу присутствовать?</a></h3>
<p>Все вебинары записываются и доступны участникам курса. Запись появляется в течение 24 часов после окончания.</p>
<h3 id="Можно-ли-задавать-вопросы"><a class="header" href="#Можно-ли-задавать-вопросы">Можно ли задавать вопросы?</a></h3>
<p>Да! Используйте чат во время вебинара или присылайте вопросы заранее на email.</p>
<h3 id="Есть-ли-домашние-задания-после-вебинаров"><a class="header" href="#Есть-ли-домашние-задания-после-вебинаров">Есть ли домашние задания после вебинаров?</a></h3>
<p>Вебинары дополняют основной материал курса. Выполняйте задания из соответствующих модулей.</p>
<h3 id="Нужно-ли-регистрироваться-на-каждый-вебинар"><a class="header" href="#Нужно-ли-регистрироваться-на-каждый-вебинар">Нужно ли регистрироваться на каждый вебинар?</a></h3>
<p>Нет, регистрация на курс автоматически дает доступ ко всем вебинарам.</p>
<hr />
<p><strong>Увидимся на вебинарах! 👋</strong></p>
<p><em>Расписание может корректироваться. Все изменения анонсируются в чате курса и по email.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Модуль-00-Введение-в-курс-1"><a class="header" href="#Модуль-00-Введение-в-курс-1">Модуль 00: Введение в курс</a></h1>
<h2 id="Продолжительность"><a class="header" href="#Продолжительность">Продолжительность</a></h2>
<p>30 минут</p>
<h2 id="Цели-модуля"><a class="header" href="#Цели-модуля">Цели модуля</a></h2>
<ul>
<li>Понять, зачем разработчику нужен SQL</li>
<li>Увидеть практические примеры применения SQL в разработке</li>
<li>Написать первые простые запросы</li>
<li>Познакомиться с инструментами курса</li>
</ul>
<h2 id="Структура-модуля"><a class="header" href="#Структура-модуля">Структура модуля</a></h2>
<h3 id="Теория"><a class="header" href="#Теория">Теория</a></h3>
<ol>
<li>
<p><strong>Зачем разработчику SQL?</strong> (10 минут)</p>
<ul>
<li>SQL в backend разработке</li>
<li>Оптимизация производительности приложений</li>
<li>Анализ данных и отладка</li>
<li>Карьерный рост и универсальность навыка</li>
</ul>
</li>
<li>
<p><strong>Обзор примеров из реальной разработки</strong> (10 минут)</p>
<ul>
<li>Запросы в веб-приложениях</li>
<li>Аналитика пользовательского поведения</li>
<li>Интеграция с внешними системами</li>
<li>Миграции и управление схемой БД</li>
</ul>
</li>
<li>
<p><strong>Первые запросы</strong> (10 минут)</p>
<ul>
<li>Подключение к базе данных</li>
<li>Простые SELECT запросы</li>
<li>Фильтрация и сортировка</li>
<li>Знакомство с PostgreSQL</li>
</ul>
</li>
</ol>
<h2 id="Практическое-задание"><a class="header" href="#Практическое-задание">Практическое задание</a></h2>
<p>Написать 5 простых запросов к демонстрационной базе данных:</p>
<ol>
<li>Получить все записи из таблицы</li>
<li>Отфильтровать данные по условию</li>
<li>Отсортировать результат</li>
<li>Подсчитать количество записей</li>
<li>Найти уникальные значения</li>
</ol>
<h2 id="Инструменты"><a class="header" href="#Инструменты">Инструменты</a></h2>
<ul>
<li>PostgreSQL</li>
<li>pgAdmin или psql</li>
<li>Демонстрационная база данных с примерами</li>
</ul>
<h2 id="Результат-модуля"><a class="header" href="#Результат-модуля">Результат модуля</a></h2>
<p>После прохождения модуля студент:</p>
<ul>
<li>✅ Понимает практическую ценность SQL для разработчика</li>
<li>✅ Может подключиться к базе данных PostgreSQL</li>
<li>✅ Умеет писать простейшие SELECT запросы</li>
<li>✅ Знаком с основными инструментами работы с БД</li>
<li>✅ Мотивирован на дальнейшее изучение SQL</li>
</ul>
<h2 id="Переход-к-следующему-модулю"><a class="header" href="#Переход-к-следующему-модулю">Переход к следующему модулю</a></h2>
<p>Базовые навыки получены, можно переходить к изучению основ SQL и архитектуры баз данных в модуле 01.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Теория-Введение-в-курс"><a class="header" href="#Теория-Введение-в-курс">Теория: Введение в курс</a></h1>
<p>В этом разделе мы изучаем основы SQL с точки зрения разработчика и делаем первые шаги в мире баз данных.</p>
<h2 id="Содержание-модуля"><a class="header" href="#Содержание-модуля">Содержание модуля</a></h2>
<h3 id="1-Зачем-разработчику-sql"><a class="header" href="#1-Зачем-разработчику-sql">1. <a href="modules/00-introduction/theory/01-why-sql-for-developers.html">Зачем разработчику SQL?</a></a></h3>
<ul>
<li>Практическая ценность SQL для разработчиков</li>
<li>Интеграция с приложениями</li>
<li>Отладка и анализ проблем</li>
<li>Карьерные перспективы</li>
</ul>
<h3 id="2-Примеры-из-реальной-разработки-в-разработке"><a class="header" href="#2-Примеры-из-реальной-разработки-в-разработке">2. Примеры из реальной разработки <em>(в разработке)</em></a></h3>
<ul>
<li>Запросы в веб-приложениях</li>
<li>Аналитика пользовательского поведения</li>
<li>Интеграция с внешними системами</li>
<li>Миграции и управление схемой БД</li>
</ul>
<h3 id="3-Первые-запросы-в-разработке"><a class="header" href="#3-Первые-запросы-в-разработке">3. Первые запросы <em>(в разработке)</em></a></h3>
<ul>
<li>Подключение к базе данных</li>
<li>Простые SELECT запросы</li>
<li>Фильтрация и сортировка</li>
<li>Знакомство с PostgreSQL</li>
</ul>
<h2 id="Цель-модуля"><a class="header" href="#Цель-модуля">Цель модуля</a></h2>
<p>После изучения теоретической части вы:</p>
<ul>
<li>✅ Поймете практическую ценность SQL для разработчика</li>
<li>✅ Увидите реальные примеры применения в разработке</li>
<li>✅ Сможете выполнить базовые операции с данными</li>
<li>✅ Будете мотивированы на дальнейшее изучение</li>
</ul>
<h2 id="Время-изучения"><a class="header" href="#Время-изучения">Время изучения</a></h2>
<p><strong>Общее время</strong>: ~30 минут<br />
<strong>Рекомендуемый темп</strong>: 10 минут на лекцию</p>
<h2 id="Следующие-шаги"><a class="header" href="#Следующие-шаги">Следующие шаги</a></h2>
<p>После изучения теории переходите к <a href="modules/00-introduction/theory/../practice/README.html">практическим заданиям</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Зачем-разработчику-sql"><a class="header" href="#Зачем-разработчику-sql">Зачем разработчику SQL?</a></h1>
<blockquote>
<p><strong>Время на изучение:</strong> 10 минут<br />
<strong>Уровень:</strong> Начинающий<br />
<strong>Цель:</strong> Понять практическую ценность SQL для разработчиков</p>
</blockquote>
<h2 id="Введение"><a class="header" href="#Введение">Введение</a></h2>
<p>Многие разработчики считают SQL "языком для аналитиков" или "устаревшей технологией". Это критическое заблуждение. SQL является одним из самых востребованных навыков в современной разработке.</p>
<h2 id="Почему-sql-критичен-для-разработчика"><a class="header" href="#Почему-sql-критичен-для-разработчика">Почему SQL критичен для разработчика?</a></h2>
<h3 id="1-Прямая-интеграция-с-приложениями"><a class="header" href="#1-Прямая-интеграция-с-приложениями">1. Прямая интеграция с приложениями</a></h3>
<p>В большинстве приложений данные хранятся в реляционных базах данных. Знание SQL позволяет:</p>
<ul>
<li><strong>Эффективно получать данные</strong> вместо загрузки всего и фильтрации в коде</li>
<li><strong>Оптимизировать производительность</strong> через правильные запросы</li>
<li><strong>Избегать N+1 проблем</strong> и других антипаттернов</li>
</ul>
<h4 id="Плохой-пример"><a class="header" href="#Плохой-пример">Плохой пример:</a></h4>
<pre><code class="language-python"># Загружаем ВСЕ записи и фильтруем в Python
users = User.objects.all()
active_users = [u for u in users if u.is_active and u.last_login &gt; datetime.now() - timedelta(days=30)]
</code></pre>
<h4 id="Хороший-пример"><a class="header" href="#Хороший-пример">Хороший пример:</a></h4>
<pre><code class="language-python"># Фильтруем на уровне БД
users = User.objects.filter(
    is_active=True,
    last_login__gte=datetime.now() - timedelta(days=30)
)
</code></pre>
<h3 id="2-Отладка-и-анализ-проблем"><a class="header" href="#2-Отладка-и-анализ-проблем">2. Отладка и анализ проблем</a></h3>
<p>Когда приложение работает медленно, SQL помогает:</p>
<ul>
<li>Анализировать медленные запросы через <code>EXPLAIN ANALYZE</code></li>
<li>Находить неиспользуемые индексы</li>
<li>Выявлять проблемные паттерны доступа к данным</li>
</ul>
<h3 id="3-Миграции-и-схема-данных"><a class="header" href="#3-Миграции-и-схема-данных">3. Миграции и схема данных</a></h3>
<p>Разработчики часто работают с:</p>
<ul>
<li>Созданием и изменением таблиц</li>
<li>Настройкой связей между сущностями</li>
<li>Миграциями при изменении схемы</li>
</ul>
<h3 id="4-Интеграция-между-системами"><a class="header" href="#4-Интеграция-между-системами">4. Интеграция между системами</a></h3>
<p>SQL необходим для:</p>
<ul>
<li>ETL процессов (Extract, Transform, Load)</li>
<li>Интеграции с внешними системами</li>
<li>Создания отчетов и дашбордов</li>
</ul>
<h2 id="Реальные-сценарии-использования"><a class="header" href="#Реальные-сценарии-использования">Реальные сценарии использования</a></h2>
<h3 id="backend-разработка"><a class="header" href="#backend-разработка">Backend разработка</a></h3>
<pre><code class="language-sql">-- Получение пользователей с их ролями и правами
SELECT u.id, u.username, u.email, 
       array_agg(r.name) as roles,
       array_agg(p.permission) as permissions
FROM users u
JOIN user_roles ur ON u.id = ur.user_id
JOIN roles r ON ur.role_id = r.id  
JOIN role_permissions rp ON r.id = rp.role_id
JOIN permissions p ON rp.permission_id = p.id
WHERE u.is_active = true
GROUP BY u.id, u.username, u.email;
</code></pre>
<h3 id="Аналитика-в-приложении"><a class="header" href="#Аналитика-в-приложении">Аналитика в приложении</a></h3>
<pre><code class="language-sql">-- Активность пользователей по дням для дашборда
SELECT 
    DATE(created_at) as date,
    COUNT(DISTINCT user_id) as daily_active_users,
    COUNT(*) as total_actions
FROM user_actions 
WHERE created_at &gt;= CURRENT_DATE - INTERVAL '30 days'
GROUP BY DATE(created_at)
ORDER BY date;
</code></pre>
<h3 id="Оптимизация-производительности"><a class="header" href="#Оптимизация-производительности">Оптимизация производительности</a></h3>
<pre><code class="language-sql">-- Поиск медленных запросов в PostgreSQL
SELECT 
    query,
    calls,
    total_time,
    mean_time,
    rows
FROM pg_stat_statements 
WHERE mean_time &gt; 100
ORDER BY mean_time DESC
LIMIT 10;
</code></pre>
<h2 id="Карьерные-перспективы"><a class="header" href="#Карьерные-перспективы">Карьерные перспективы</a></h2>
<h3 id="Статистика-рынка-труда"><a class="header" href="#Статистика-рынка-труда">Статистика рынка труда</a></h3>
<ul>
<li><strong>87%</strong> вакансий разработчиков упоминают SQL как требование</li>
<li>Разработчики со знанием SQL получают в среднем на <strong>15-25% больше</strong></li>
<li>SQL входит в топ-5 самых востребованных технических навыков</li>
</ul>
<h3 id="Универсальность-навыка"><a class="header" href="#Универсальность-навыка">Универсальность навыка</a></h3>
<p>SQL работает практически везде:</p>
<ul>
<li><strong>Web-разработка</strong>: PostgreSQL, MySQL, SQL Server</li>
<li><strong>Big Data</strong>: Apache Spark SQL, Google BigQuery, Amazon Redshift</li>
<li><strong>Аналитика</strong>: Snowflake, ClickHouse, Apache Drill</li>
<li><strong>Мобильная разработка</strong>: SQLite</li>
<li><strong>DevOps</strong>: мониторинг и логирование</li>
</ul>
<h2 id="Типичные-заблуждения-о-sql"><a class="header" href="#Типичные-заблуждения-о-sql">Типичные заблуждения о SQL</a></h2>
<h3 id="-orm-решает-все-проблемы"><a class="header" href="#-orm-решает-все-проблемы">❌ "ORM решает все проблемы"</a></h3>
<p>ORM (Object-Relational Mapping) - отличный инструмент, но:</p>
<ul>
<li>Генерирует неоптимальные запросы в сложных случаях</li>
<li>Скрывает проблемы производительности</li>
<li>Ограничивает возможности продвинутого SQL</li>
</ul>
<h3 id="-sql-сложен-для-изучения"><a class="header" href="#-sql-сложен-для-изучения">❌ "SQL сложен для изучения"</a></h3>
<p>На самом деле:</p>
<ul>
<li>Базовый SQL изучается за несколько дней</li>
<li>Синтаксис интуитивен и близок к естественному языку</li>
<li>Навыки применимы во множестве проектов</li>
</ul>
<h3 id="-nosql-заменит-реляционные-БД"><a class="header" href="#-nosql-заменит-реляционные-БД">❌ "NoSQL заменит реляционные БД"</a></h3>
<p>Реальность:</p>
<ul>
<li>Большинство проектов используют реляционные БД</li>
<li>Даже NoSQL системы часто поддерживают SQL-подобный синтаксис</li>
<li>Hybrid подходы (PostgreSQL + JSON) становятся стандартом</li>
</ul>
<h2 id="Уровни-владения-sql-для-разработчиков"><a class="header" href="#Уровни-владения-sql-для-разработчиков">Уровни владения SQL для разработчиков</a></h2>
<h3 id="-Базовый-уровень-необходимый-минимум"><a class="header" href="#-Базовый-уровень-необходимый-минимум">🟢 Базовый уровень (необходимый минимум)</a></h3>
<ul>
<li>SELECT, INSERT, UPDATE, DELETE</li>
<li>WHERE, GROUP BY, ORDER BY</li>
<li>Основные JOIN операции</li>
<li>Создание простых индексов</li>
</ul>
<h3 id="-Средний-уровень-желательно"><a class="header" href="#-Средний-уровень-желательно">🟡 Средний уровень (желательно)</a></h3>
<ul>
<li>Подзапросы и CTE</li>
<li>Оконные функции</li>
<li>Процедуры и функции</li>
<li>Анализ планов выполнения</li>
</ul>
<h3 id="-Продвинутый-уровень-конкурентное-преимущество"><a class="header" href="#-Продвинутый-уровень-конкурентное-преимущество">🔴 Продвинутый уровень (конкурентное преимущество)</a></h3>
<ul>
<li>Оптимизация сложных запросов</li>
<li>Проектирование схем БД</li>
<li>Настройка производительности</li>
<li>Работа с большими данными</li>
</ul>
<h2 id="Практические-советы"><a class="header" href="#Практические-советы">Практические советы</a></h2>
<h3 id="1-Начните-с-задач-в-текущем-проекте"><a class="header" href="#1-Начните-с-задач-в-текущем-проекте">1. Начните с задач в текущем проекте</a></h3>
<ul>
<li>Замените некоторые ORM запросы на нативный SQL</li>
<li>Добавьте аналитические запросы для дашбордов</li>
<li>Оптимизируйте медленные операции</li>
</ul>
<h3 id="2-Изучайте-на-реальных-данных"><a class="header" href="#2-Изучайте-на-реальных-данных">2. Изучайте на реальных данных</a></h3>
<ul>
<li>Используйте данные вашего приложения</li>
<li>Анализируйте логи и метрики</li>
<li>Экспериментируйте с различными подходами</li>
</ul>
<h3 id="3-Изучайте-план-выполнения"><a class="header" href="#3-Изучайте-план-выполнения">3. Изучайте план выполнения</a></h3>
<ul>
<li>Всегда используйте <code>EXPLAIN ANALYZE</code></li>
<li>Понимайте, как работают индексы</li>
<li>Измеряйте производительность</li>
</ul>
<h2 id="Заключение"><a class="header" href="#Заключение">Заключение</a></h2>
<p>SQL - это не просто "язык для работы с базами данных". Это:</p>
<ul>
<li><strong>Инструмент оптимизации</strong> производительности приложений</li>
<li><strong>Способ анализа</strong> поведения системы и пользователей</li>
<li><strong>Навык карьерного роста</strong> в любой области разработки</li>
<li><strong>Универсальный язык</strong> для работы с данными</li>
</ul>
<p>В следующих модулях мы изучим, как эффективно применять SQL в современной разработке, начиная с основ и постепенно переходя к продвинутым техникам.</p>
<hr />
<h2 id="Что-дальше"><a class="header" href="#Что-дальше">Что дальше?</a></h2>
<p>В следующей лекции мы рассмотрим <strong>конкретные примеры</strong> использования SQL в реальных проектах и напишем первые запросы.</p>
<h2 id="Проверьте-себя"><a class="header" href="#Проверьте-себя">Проверьте себя</a></h2>
<ol>
<li>Назовите 3 основные причины, почему SQL важен для backend разработчика</li>
<li>Какие проблемы может создать незнание SQL при работе с ORM?</li>
<li>Как SQL может помочь в отладке проблем производительности?</li>
</ol>
<p><em>Ответы обсудим на первом вебинаре курса</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Примеры-из-реальной-разработки"><a class="header" href="#Примеры-из-реальной-разработки">Примеры из реальной разработки</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Первые-запросы"><a class="header" href="#Первые-запросы">Первые запросы</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практика-Введение-в-курс"><a class="header" href="#Практика-Введение-в-курс">Практика: Введение в курс</a></h1>
<p>Добро пожаловать в практическую часть модуля! Здесь вы напишете свои первые SQL запросы и познакомитесь с основными операциями.</p>
<h2 id="Содержание-практики"><a class="header" href="#Содержание-практики">Содержание практики</a></h2>
<h3 id="Упражнения-Первые-sql-запросы"><a class="header" href="#Упражнения-Первые-sql-запросы"><a href="modules/00-introduction/practice/exercises/01-first-queries.html">Упражнения: Первые SQL запросы</a></a></h3>
<p>В этом задании вы:</p>
<ul>
<li>Подключитесь к базе данных PostgreSQL</li>
<li>Выполните простые SELECT запросы</li>
<li>Научитесь фильтровать и сортировать данные</li>
<li>Познакомитесь с агрегатными функциями</li>
</ul>
<p><strong>Время выполнения</strong>: 15-20 минут<br />
<strong>Сложность</strong>: Начинающий</p>
<h3 id="Решения-будут-добавлены-после-выполнения"><a class="header" href="#Решения-будут-добавлены-после-выполнения">Решения <em>(будут добавлены после выполнения)</em></a></h3>
<p>Эталонные решения с объяснениями и альтернативными подходами.</p>
<h2 id="Подготовка-к-практике"><a class="header" href="#Подготовка-к-практике">Подготовка к практике</a></h2>
<h3 id="Требования-1"><a class="header" href="#Требования-1">Требования</a></h3>
<ol>
<li>✅ PostgreSQL 14+ установлен и запущен</li>
<li>✅ pgAdmin или другой SQL клиент настроен</li>
<li>✅ База данных <code>sql_course</code> создана</li>
<li>✅ Выполнен скрипт <code>scripts/setup-db.sql</code></li>
</ol>
<h3 id="Проверка-готовности"><a class="header" href="#Проверка-готовности">Проверка готовности</a></h3>
<p>Выполните следующий запрос в вашем SQL клиенте:</p>
<pre><code class="language-sql">SELECT COUNT(*) FROM employees;
</code></pre>
<p><strong>Ожидаемый результат</strong>: 16 записей</p>
<p>Если возникают проблемы, обратитесь к <a href="modules/00-introduction/practice/../../docs/installation-guide.html">руководству по установке</a>.</p>
<h2 id="Рекомендации-по-выполнению"><a class="header" href="#Рекомендации-по-выполнению">Рекомендации по выполнению</a></h2>
<h3 id="Подход-к-заданиям"><a class="header" href="#Подход-к-заданиям">Подход к заданиям</a></h3>
<ol>
<li><strong>Читайте задание внимательно</strong> - понимание требований критично</li>
<li><strong>Начинайте с простого</strong> - усложняйте запросы постепенно</li>
<li><strong>Экспериментируйте</strong> - пробуйте разные варианты решений</li>
<li><strong>Проверяйте результаты</strong> - убедитесь, что данные соответствуют ожиданиям</li>
</ol>
<h3 id="Отладка-запросов"><a class="header" href="#Отладка-запросов">Отладка запросов</a></h3>
<ul>
<li>Используйте <code>\timing</code> в psql для измерения времени выполнения</li>
<li>Проверяйте количество возвращаемых строк</li>
<li>Сравнивайте результаты с ожидаемыми</li>
</ul>
<h3 id="Если-застряли"><a class="header" href="#Если-застряли">Если застряли</a></h3>
<ol>
<li>Перечитайте задание - возможно, упустили важную деталь</li>
<li>Проверьте синтаксис - частая причина ошибок</li>
<li>Разбейте сложный запрос на части</li>
<li>Обратитесь к <a href="modules/00-introduction/practice/exercises/01-first-queries.html#%D0%BF%D0%BE%D0%B4%D1%81%D0%BA%D0%B0%D0%B7%D0%BA%D0%B8">подсказкам</a> в задании</li>
</ol>
<h2 id="Полезные-команды"><a class="header" href="#Полезные-команды">Полезные команды</a></h2>
<h3 id="Описание-таблиц"><a class="header" href="#Описание-таблиц">Описание таблиц</a></h3>
<pre><code class="language-sql">-- Показать структуру таблицы
\d employees

-- Показать все таблицы
\dt

-- Показать примеры данных
SELECT * FROM employees LIMIT 5;
</code></pre>
<h3 id="Основные-операции"><a class="header" href="#Основные-операции">Основные операции</a></h3>
<pre><code class="language-sql">-- Базовый SELECT
SELECT column1, column2 FROM table_name;

-- Фильтрация
SELECT * FROM table_name WHERE condition;

-- Сортировка
SELECT * FROM table_name ORDER BY column_name;

-- Агрегация
SELECT COUNT(*) FROM table_name;
</code></pre>
<h2 id="Критерии-оценки"><a class="header" href="#Критерии-оценки">Критерии оценки</a></h2>
<p>Ваши решения должны:</p>
<ul>
<li>✅ <strong>Работать корректно</strong> - возвращать правильные данные</li>
<li>✅ <strong>Быть читаемыми</strong> - использовать понятные имена и форматирование</li>
<li>✅ <strong>Соответствовать требованиям</strong> - точно выполнять условия задания</li>
</ul>
<h2 id="Что-дальше-1"><a class="header" href="#Что-дальше-1">Что дальше?</a></h2>
<p>После успешного выполнения упражнений:</p>
<ol>
<li><strong>Сравните</strong> ваши решения с эталонными</li>
<li><strong>Поэкспериментируйте</strong> с модификациями запросов</li>
<li><strong>Переходите</strong> к следующему модулю: <a href="modules/00-introduction/practice/../../01-sql-basics/README.html">01. Основы SQL и баз данных</a></li>
</ol>
<hr />
<p><strong>Удачи в выполнении первых SQL запросов! 🚀</strong></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практическое-задание-Первые-sql-запросы"><a class="header" href="#Практическое-задание-Первые-sql-запросы">Практическое задание: Первые SQL запросы</a></h1>
<blockquote>
<p><strong>Время выполнения:</strong> 15 минут<br />
<strong>Сложность:</strong> Начинающий<br />
<strong>Цель:</strong> Написать первые SQL запросы и познакомиться с синтаксисом</p>
</blockquote>
<h2 id="-Интерактивный-режим"><a class="header" href="#-Интерактивный-режим">🚀 Интерактивный режим</a></h2>
<p>Вы можете выполнять SQL запросы прямо в браузере! Просто нажмите кнопку "▶ Выполнить SQL" под любым блоком кода.</p>
<h2 id="Подготовка"><a class="header" href="#Подготовка">Подготовка</a></h2>
<p>Убедитесь, что вы:</p>
<ol>
<li>✅ Установили PostgreSQL и pgAdmin (или другой клиент)</li>
<li>✅ Выполнили скрипт <code>scripts/setup-db.sql</code></li>
<li>✅ Можете подключиться к базе <code>sql_course</code></li>
</ol>
<h2 id="Справочная-информация"><a class="header" href="#Справочная-информация">Справочная информация</a></h2>
<p>В базе данных есть таблица <code>employees</code> со следующими полями:</p>
<ul>
<li><code>id</code> - уникальный идентификатор</li>
<li><code>first_name</code> - имя</li>
<li><code>last_name</code> - фамилия</li>
<li><code>email</code> - электронная почта</li>
<li><code>department</code> - отдел</li>
<li><code>position</code> - должность</li>
<li><code>salary</code> - зарплата</li>
<li><code>hire_date</code> - дата найма</li>
<li><code>active</code> - активный ли сотрудник</li>
</ul>
<h2 id="Задания"><a class="header" href="#Задания">Задания</a></h2>
<h3 id="Задание-1-Получить-все-записи"><a class="header" href="#Задание-1-Получить-все-записи">Задание 1: Получить все записи</a></h3>
<p>Напишите запрос, который выводит всех сотрудников с их основной информацией.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> Таблица со всеми сотрудниками (должно быть 10 записей в интерактивном режиме)</p>
<hr />
<h3 id="Задание-2-Фильтрация-по-отделу"><a class="header" href="#Задание-2-Фильтрация-по-отделу">Задание 2: Фильтрация по отделу</a></h3>
<p>Найдите всех сотрудников IT отдела.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> 5 сотрудников из IT отдела</p>
<hr />
<h3 id="Задание-3-Сортировка-по-зарплате"><a class="header" href="#Задание-3-Сортировка-по-зарплате">Задание 3: Сортировка по зарплате</a></h3>
<p>Выведите всех сотрудников, отсортированных по убыванию зарплаты.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> Список сотрудников от самых высокооплачиваемых к наименее</p>
<hr />
<h3 id="Задание-4-Подсчет-количества-записей"><a class="header" href="#Задание-4-Подсчет-количества-записей">Задание 4: Подсчет количества записей</a></h3>
<p>Посчитайте общее количество сотрудников в компании.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> Одно число - 10</p>
<hr />
<h3 id="Задание-5-Уникальные-значения"><a class="header" href="#Задание-5-Уникальные-значения">Задание 5: Уникальные значения</a></h3>
<p>Найдите все уникальные отделы в компании.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> Список уникальных названий отделов</p>
<hr />
<h3 id="Задание-6-Диапазон-зарплат"><a class="header" href="#Задание-6-Диапазон-зарплат">Задание 6: Диапазон зарплат</a></h3>
<p>Найдите сотрудников с зарплатой от 80,000 до 120,000.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> Сотрудники в указанном диапазоне зарплат</p>
<hr />
<h3 id="Задание-7-Поиск-по-имени"><a class="header" href="#Задание-7-Поиск-по-имени">Задание 7: Поиск по имени</a></h3>
<p>Найдите всех сотрудников, у которых имя начинается на букву "А".</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> Сотрудники с именами на "А"</p>
<hr />
<h3 id="Задание-8-Сложное-условие"><a class="header" href="#Задание-8-Сложное-условие">Задание 8: Сложное условие</a></h3>
<p>Найдите активных сотрудников IT отдела с зарплатой больше 100,000.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<p><strong>Ожидаемый результат:</strong> Активные IT сотрудники с высокой зарплатой</p>
<hr />
<h2 id="Бонусные-задания-необязательно"><a class="header" href="#Бонусные-задания-необязательно">Бонусные задания (необязательно)</a></h2>
<h3 id="Бонус-1-Статистика-по-отделам"><a class="header" href="#Бонус-1-Статистика-по-отделам">Бонус 1: Статистика по отделам</a></h3>
<p>Посчитайте количество сотрудников в каждом отделе.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<h3 id="Бонус-2-Средняя-зарплата"><a class="header" href="#Бонус-2-Средняя-зарплата">Бонус 2: Средняя зарплата</a></h3>
<p>Найдите среднюю зарплату по компании.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<h3 id="Бонус-3-Самый-опытный-сотрудник"><a class="header" href="#Бонус-3-Самый-опытный-сотрудник">Бонус 3: Самый опытный сотрудник</a></h3>
<p>Найдите сотрудника с самой ранней датой найма.</p>
<pre><code class="language-sql editable">-- Ваш запрос здесь
</code></pre>
<h2 id="-Практическая-работа"><a class="header" href="#-Практическая-работа">🎯 Практическая работа</a></h2>
<p>Теперь попробуйте написать собственные запросы! В блоке ниже вы можете вводить и редактировать SQL код:</p>
<pre><code class="language-sql editable">-- Напишите ваш запрос здесь
-- Например, попробуйте найти всех сотрудников с зарплатой больше 100000:
</code></pre>
<h3 id="Идеи-для-экспериментов"><a class="header" href="#Идеи-для-экспериментов">Идеи для экспериментов:</a></h3>
<ol>
<li><strong>Найдите самого молодого сотрудника</strong> (по дате найма)</li>
<li><strong>Выведите топ-3 самых высокооплачиваемых сотрудника</strong></li>
<li><strong>Посчитайте средний стаж работы в каждом отделе</strong></li>
<li><strong>Найдите сотрудников, которые не являются менеджерами</strong></li>
</ol>
<h2 id="-Эксперименты-с-данными"><a class="header" href="#-Эксперименты-с-данными">🔧 Эксперименты с данными</a></h2>
<p>Попробуйте модифицировать данные и посмотрите, как изменятся результаты:</p>
<h3 id="Добавление-нового-сотрудника-1"><a class="header" href="#Добавление-нового-сотрудника-1">Добавление нового сотрудника</a></h3>
<pre><code class="language-sql editable">
-- Проверим результат
SELECT * FROM employees WHERE id = 11;
</code></pre>
<h3 id="Обновление-данных-1"><a class="header" href="#Обновление-данных-1">Обновление данных</a></h3>
<pre><code class="language-sql editable">-- Повысим зарплату всем сотрудникам IT на 10%

-- Посмотрим результат
SELECT first_name, last_name, salary FROM employees WHERE department = 'IT';
</code></pre>
<h2 id="-Свободное-экспериментирование"><a class="header" href="#-Свободное-экспериментирование">🆓 Свободное экспериментирование</a></h2>
<p>Этот блок полностью для ваших экспериментов! Попробуйте любые SQL запросы:</p>
<pre><code class="language-sql editable">-- Ваша песочница для SQL экспериментов
-- Можете удалить этот комментарий и писать что угодно!

</code></pre>
<h2 id="Подсказки"><a class="header" href="#Подсказки">Подсказки</a></h2>
<details>
<summary>Подсказка для задания 1</summary>
<p>Используйте конструкцию <code>SELECT * FROM table_name</code></p>
</details>
<details>
<summary>Подсказка для задания 2</summary>
<p>Используйте <code>WHERE department = 'IT'</code></p>
</details>
<details>
<summary>Подсказка для задания 3</summary>
<p>Используйте <code>ORDER BY salary DESC</code></p>
</details>
<details>
<summary>Подсказка для задания 4</summary>
<p>Используйте агрегатную функцию <code>COUNT(*)</code></p>
</details>
<details>
<summary>Подсказка для задания 5</summary>
<p>Используйте <code>SELECT DISTINCT department FROM employees</code></p>
</details>
<details>
<summary>Подсказка для задания 6</summary>
<p>Используйте <code>WHERE salary BETWEEN 80000 AND 120000</code></p>
</details>
<details>
<summary>Подсказка для задания 7</summary>
<p>Используйте <code>WHERE first_name LIKE 'А%'</code></p>
</details>
<details>
<summary>Подсказка для задания 8</summary>
<p>Комбинируйте условия через <code>AND</code>: <code>WHERE active = 1 AND department = 'IT' AND salary &gt; 100000</code></p>
</details>
<h2 id="Проверка-выполнения"><a class="header" href="#Проверка-выполнения">Проверка выполнения</a></h2>
<p>После выполнения каждого задания:</p>
<ol>
<li><strong>Запустите запрос</strong> в интерактивном режиме или в pgAdmin/psql</li>
<li><strong>Проверьте результат</strong> - соответствует ли он ожидаемому</li>
<li><strong>Запишите количество строк</strong> в результате</li>
<li><strong>Обратите внимание</strong> на время выполнения запроса</li>
</ol>
<h2 id="Полезные-команды-psql"><a class="header" href="#Полезные-команды-psql">Полезные команды psql</a></h2>
<pre><code class="language-sql editable">-- Показать описание таблицы
\d employees

-- Показать все таблицы
\dt

-- Включить отображение времени выполнения
\timing

-- Очистить экран
\! clear  -- Linux/Mac
\! cls    -- Windows
</code></pre>
<h2 id="Что-дальше-2"><a class="header" href="#Что-дальше-2">Что дальше?</a></h2>
<p>После выполнения заданий:</p>
<ol>
<li>Сравните ваши решения с эталонными в папке <code>solutions/</code></li>
<li>Поэкспериментируйте с различными комбинациями условий</li>
<li>Попробуйте изменить порядок сортировки</li>
<li>Подготовьтесь к следующему модулю о основах SQL</li>
</ol>
<h2 id="Распространенные-ошибки"><a class="header" href="#Распространенные-ошибки">Распространенные ошибки</a></h2>
<p>❌ <strong>Забыть точку с запятой</strong> в конце запроса<br />
❌ <strong>Неправильный регистр</strong> в названиях полей<br />
❌ <strong>Забыть кавычки</strong> для строковых значений<br />
❌ <strong>Опечатки</strong> в названиях таблиц и полей</p>
<hr />
<p><strong>Удачи с первыми запросами! 🚀</strong></p>
<p><em>Если возникнут вопросы, обратитесь к наставнику в чате курса или дождитесь разбора на вебинаре.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Решения"><a class="header" href="#Решения">Решения</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Обзор-модуля"><a class="header" href="#Обзор-модуля">Обзор модуля</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Теория-1"><a class="header" href="#Теория-1">Теория</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="91-Устройство-postgresql"><a class="header" href="#91-Устройство-postgresql">9.1. Устройство PostgreSQL</a></h1>
<p>PostgreSQL — это мощная, свободно распространяемая объектно-реляционная система управления базами данных (СУБД). Её надёжность, гибкость и соответствие стандартам SQL сделали её популярным выбором для самых разных проектов, от небольших приложений до крупных систем с высокой нагрузкой.</p>
<h2 id="Архитектура-Клиент-Сервер"><a class="header" href="#Архитектура-Клиент-Сервер">Архитектура "Клиент-Сервер"</a></h2>
<p>PostgreSQL работает по классической клиент-серверной модели.</p>
<ul>
<li><strong>Сервер (Backend)</strong>: Это ядро СУБД. Процесс <code>postgres</code> (также известный как <code>postmaster</code>) постоянно запущен на сервере, где хранятся данные. Он прослушивает сетевые подключения от клиентов. Когда клиент подключается, <code>postmaster</code> создает для него отдельный дочерний процесс-обработчик. Этот процесс выполняет все запросы данного клиента, обеспечивая изоляцию сессий друг от друга.</li>
<li><strong>Клиент (Frontend)</strong>: Это любое приложение, которое подключается к серверу для выполнения SQL-запросов. Это может быть консольная утилита (<code>psql</code>), графический интерфейс (pgAdmin, DBeaver) или ваше собственное приложение, использующее специальную библиотеку (драйвер) для подключения к PostgreSQL.</li>
</ul>
<h2 id="Логическая-структура-хранения"><a class="header" href="#Логическая-структура-хранения">Логическая структура хранения</a></h2>
<p>Данные в PostgreSQL организованы иерархически:</p>
<ol>
<li><strong>Кластер баз данных (Database Cluster)</strong>: Это совокупность баз данных, управляемая одним экземпляром сервера PostgreSQL. Физически это просто каталог на диске (обычно <code>/var/lib/pgsql/data</code> или аналогичный), содержащий все данные и конфигурационные файлы.</li>
<li><strong>База данных (Database)</strong>: Кластер может содержать несколько баз данных. Каждая БД — это изолированное пространство для хранения объектов. Пользователи из одной БД не могут напрямую видеть данные в другой (если не использовать специальные расширения типа <code>dblink</code>).</li>
<li><strong>Схемы (Schemas)</strong>: Внутри каждой базы данных можно создавать схемы. Схема — это пространство имен. Она позволяет логически группировать таблицы, функции и другие объекты. Это полезно для организации больших приложений или для разграничения прав доступа. Если схема не указана, используется схема по умолчанию — <code>public</code>.</li>
<li><strong>Объекты базы данных</strong>: Внутри схем находятся уже знакомые нам объекты:
<ul>
<li><strong>Таблицы (Tables)</strong>: Основные структуры для хранения данных.</li>
<li><strong>Индексы (Indexes)</strong>: Вспомогательные структуры для ускорения поиска данных.</li>
<li><strong>Представления (Views)</strong>: Виртуальные таблицы, основанные на результатах SQL-запроса.</li>
<li><strong>Функции и хранимые процедуры</strong>: Блоки кода, которые можно выполнять на сервере.</li>
<li><strong>Последовательности (Sequences)</strong>, <strong>Типы данных</strong> и другие.</li>
</ul>
</li>
</ol>
<h2 id="Процессная-архитектура"><a class="header" href="#Процессная-архитектура">Процессная архитектура</a></h2>
<p>Работающий сервер PostgreSQL — это несколько взаимодействующих процессов:</p>
<ul>
<li><code>postmaster</code>: Главный управляющий процесс. Он запускается первым и отвечает за запуск и остановку дочерних процессов, а также принимает входящие подключения.</li>
<li><strong>Рабочие процессы (Backend Processes)</strong>: На каждое клиентское подключение <code>postmaster</code> создает отдельный процесс <code>postgres</code>. Он обрабатывает все запросы от этого клиента.</li>
<li><strong>Фоновые процессы (Background Processes)</strong>:
<ul>
<li><strong>Writer (BGWriter)</strong>: Периодически записывает "грязные" (измененные в памяти) буферы на диск, снижая нагрузку на рабочие процессы.</li>
<li><strong>WAL Writer (WAL Writer)</strong>: Записывает транзакционный лог (Write-Ahead Log) на диск. Это ключевой механизм для обеспечения долговечности (Durability) и восстановления после сбоев.</li>
<li><strong>Autovacuum Launcher</strong>: Запускает процессы очистки (<code>autovacuum worker</code>), которые удаляют "мертвые" строки и анализируют таблицы для оптимизации запросов.</li>
<li><strong>Checkpointer</strong>: Обеспечивает, что все изменения данных рано или поздно попадут на диск, создавая "точки сохранения" (checkpoints).</li>
</ul>
</li>
</ul>
<h2 id="Транзакции-и-многоверсионность-mvcc"><a class="header" href="#Транзакции-и-многоверсионность-mvcc">Транзакции и многоверсионность (MVCC)</a></h2>
<p>Одной из ключевых особенностей PostgreSQL является реализация многоверсионного управления параллельным доступом (Multi-Version Concurrency Control, MVCC).</p>
<p>Вместо того чтобы блокировать данные при чтении, PostgreSQL для каждого запроса создает "снимок" (snapshot) данных на определенный момент времени. Когда транзакция изменяет строку, СУБД не перезаписывает старые данные, а создает новую версию этой строки. Старая версия остается видимой для транзакций, которые начались раньше. Это позволяет разным клиентам читать и писать данные одновременно с минимальными блокировками, что значительно повышает производительность в многопользовательских системах.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="92-Основы-sql-ddl-data-definition-language"><a class="header" href="#92-Основы-sql-ddl-data-definition-language">9.2. Основы SQL: DDL (Data Definition Language)</a></h1>
<p>DDL (Data Definition Language) — это подмножество языка SQL, которое отвечает за создание, изменение и удаление структуры объектов базы данных. Эти команды не работают с самими данными, а только с их "контейнерами" и метаданными.</p>
<p>Основные команды DDL:</p>
<ul>
<li><code>CREATE</code> — создать объект.</li>
<li><code>ALTER</code> — изменить объект.</li>
<li><code>DROP</code> — удалить объект.</li>
</ul>
<h2 id="create-Создание-объектов"><a class="header" href="#create-Создание-объектов"><code>CREATE</code>: Создание объектов</a></h2>
<h3 id="create-database"><a class="header" href="#create-database"><code>CREATE DATABASE</code></a></h3>
<p>Создает новую базу данных внутри кластера.</p>
<pre><code class="language-sql">CREATE DATABASE my_new_database;
</code></pre>
<h3 id="create-schema"><a class="header" href="#create-schema"><code>CREATE SCHEMA</code></a></h3>
<p>Создает новую схему внутри текущей базы данных.</p>
<pre><code class="language-sql">CREATE SCHEMA my_app;
</code></pre>
<h3 id="create-table"><a class="header" href="#create-table"><code>CREATE TABLE</code></a></h3>
<p>Это одна из самых важных и многофункциональных команд. Она создает новую таблицу в текущей схеме.</p>
<p><strong>Синтаксис:</strong></p>
<pre><code class="language-sql">CREATE TABLE table_name (
    column_name1 data_type [constraints],
    column_name2 data_type [constraints],
    ...
    table_constraints
);
</code></pre>
<p><strong>Основные типы данных в PostgreSQL:</strong></p>
<ul>
<li><code>INTEGER</code> (или <code>INT</code>), <code>BIGINT</code>, <code>SMALLINT</code>: Целочисленные типы.</li>
<li><code>NUMERIC(precision, scale)</code> или <code>DECIMAL</code>: Числа с фиксированной точностью (например, для денег).</li>
<li><code>REAL</code>, <code>DOUBLE PRECISION</code>: Числа с плавающей точкой.</li>
<li><code>SERIAL</code>, <code>BIGSERIAL</code>: Автоинкрементные целые числа (идеально для первичных ключей).</li>
<li><code>VARCHAR(n)</code>, <code>TEXT</code>: Строки. <code>VARCHAR(n)</code> ограничивает максимальную длину, <code>TEXT</code> — нет.</li>
<li><code>BOOLEAN</code>: <code>TRUE</code> или <code>FALSE</code>.</li>
<li><code>DATE</code>, <code>TIME</code>, <code>TIMESTAMP</code>: Дата, время, дата и время.</li>
<li><code>JSON</code>, <code>JSONB</code>: Хранение JSON. <code>JSONB</code> является бинарным форматом и предпочтителен для большинства операций.</li>
</ul>
<p><strong>Ограничения (Constraints):</strong></p>
<ul>
<li><code>NOT NULL</code>: Колонка не может содержать <code>NULL</code>.</li>
<li><code>UNIQUE</code>: Все значения в колонке должны быть уникальны.</li>
<li><code>PRIMARY KEY</code>: Комбинация <code>NOT NULL</code> и <code>UNIQUE</code>. Уникально идентифицирует каждую запись в таблице. У таблицы может быть только один первичный ключ.</li>
<li><code>FOREIGN KEY</code>: Устанавливает связь с другой таблицей.</li>
<li><code>CHECK</code>: Проверяет, что значение в колонке удовлетворяет определенному условию.</li>
<li><code>DEFAULT</code>: Устанавливает значение по умолчанию, если оно не указано.</li>
</ul>
<p><strong>Пример:</strong></p>
<pre><code class="language-sql">CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password_hash VARCHAR(255) NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    balance NUMERIC(10, 2) CHECK (balance &gt;= 0)
);
</code></pre>
<h2 id="alter-Изменение-объектов"><a class="header" href="#alter-Изменение-объектов"><code>ALTER</code>: Изменение объектов</a></h2>
<p>Команда <code>ALTER</code> позволяет изменять существующие объекты. Чаще всего используется <code>ALTER TABLE</code>.</p>
<p><strong>Примеры:</strong></p>
<pre><code class="language-sql">-- Добавить новую колонку
ALTER TABLE users ADD COLUMN last_login_ip VARCHAR(45);

-- Удалить колонку
ALTER TABLE users DROP COLUMN last_login_ip;

-- Изменить тип данных колонки (может быть сложной операцией)
ALTER TABLE users ALTER COLUMN username TYPE VARCHAR(80);

-- Добавить ограничение
ALTER TABLE users ADD CONSTRAINT positive_balance CHECK (balance &gt;= 0);

-- Удалить ограничение
ALTER TABLE users DROP CONSTRAINT positive_balance;

-- Переименовать таблицу
ALTER TABLE users RENAME TO app_users;
</code></pre>
<h2 id="drop-Удаление-объектов"><a class="header" href="#drop-Удаление-объектов"><code>DROP</code>: Удаление объектов</a></h2>
<p>Команда <code>DROP</code> полностью и безвозвратно удаляет объект из базы данных. Используйте её с осторожностью!</p>
<p><strong>Примеры:</strong></p>
<pre><code class="language-sql">-- Удалить таблицу
DROP TABLE app_users;

-- Удалить таблицу, только если она существует (не вызовет ошибки)
DROP TABLE IF EXISTS app_users;

-- Удалить таблицу и все зависимые от нее объекты (например, внешние ключи)
DROP TABLE app_users CASCADE;

-- Удалить схему (удалит и все объекты внутри нее)
DROP SCHEMA my_app CASCADE;

-- Удалить базу данных
DROP DATABASE my_new_database;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="93-Основы-sql-dml-data-manipulation-language"><a class="header" href="#93-Основы-sql-dml-data-manipulation-language">9.3. Основы SQL: DML (Data Manipulation Language)</a></h1>
<p>DML (Data Manipulation Language) — это набор команд SQL, предназначенных для управления данными внутри таблиц: вставки, обновления, удаления и чтения. Если DDL создает "скелет" базы данных, то DML наполняет его "жизнью".</p>
<p>Основные команды DML:</p>
<ul>
<li><code>INSERT</code> — вставить новые данные (строки).</li>
<li><code>UPDATE</code> — обновить существующие данные.</li>
<li><code>DELETE</code> — удалить данные.</li>
<li><code>SELECT</code> — прочитать данные (часто выделяют в отдельную категорию DQL - Data Query Language, но по сути это операция манипуляции). Мы подробно рассмотрим <code>SELECT</code> в теме про JOIN.</li>
</ul>
<h2 id="insert-Вставка-данных"><a class="header" href="#insert-Вставка-данных"><code>INSERT</code>: Вставка данных</a></h2>
<p>Команда <code>INSERT</code> добавляет одну или несколько новых строк в таблицу.</p>
<p><strong>Синтаксис для вставки одной строки:</strong></p>
<pre><code class="language-sql">INSERT INTO table_name (column1, column2, ...)
VALUES (value1, value2, ...);
</code></pre>
<p>Важно, чтобы количество и типы данных в <code>VALUES</code> соответствовали перечисленным колонкам. Если вы вставляете значения для всех колонок в их исходном порядке, список колонок можно опустить.</p>
<p><strong>Пример:</strong></p>
<pre><code class="language-sql">INSERT INTO employees (first_name, last_name, email, department_id, salary)
VALUES ('Петр', 'Сергеев', 'petr.sergeev@company.com', 1, 95000.00);
</code></pre>
<p><strong>Синтаксис для вставки нескольких строк:</strong></p>
<pre><code class="language-sql">INSERT INTO table_name (column1, column2, ...)
VALUES
    (value1_1, value1_2, ...),
    (value2_1, value2_2, ...),
    (value3_1, value3_2, ...);
</code></pre>
<p><strong>Пример:</strong></p>
<pre><code class="language-sql">INSERT INTO employees (first_name, last_name, email, department_id, salary)
VALUES
    ('Светлана', 'Соколова', 'svetlana.s@company.com', 2, 82000),
    ('Игорь', 'Белов', 'igor.belov@company.com', 1, 115000);
</code></pre>
<h3 id="returning"><a class="header" href="#returning"><code>RETURNING</code></a></h3>
<p>В PostgreSQL команда <code>INSERT</code> (а также <code>UPDATE</code> и <code>DELETE</code>) может возвращать значения из обработанных строк с помощью опции <code>RETURNING</code>. Это очень удобно, чтобы сразу получить <code>id</code> созданной записи.</p>
<pre><code class="language-sql">INSERT INTO employees (first_name, last_name, email)
VALUES ('Новый', 'Сотрудник', 'new.employee@company.com')
RETURNING id, first_name, salary; -- salary вернет значение по умолчанию, если оно есть
</code></pre>
<h2 id="update-Обновление-данных"><a class="header" href="#update-Обновление-данных"><code>UPDATE</code>: Обновление данных</a></h2>
<p>Команда <code>UPDATE</code> изменяет существующие строки в таблице.</p>
<p><strong>Крайне важно всегда использовать <code>UPDATE</code> с условием <code>WHERE</code>!</strong> Иначе вы обновите <strong>ВСЕ</strong> строки в таблице.</p>
<p><strong>Синтаксис:</strong></p>
<pre><code class="language-sql">UPDATE table_name
SET column1 = value1, column2 = value2, ...
WHERE condition;
</code></pre>
<p><strong>Пример:</strong></p>
<pre><code class="language-sql">-- Повышаем зарплату конкретному сотруднику
UPDATE employees
SET salary = salary * 1.10, position = 'Старший разработчик'
WHERE email = 'ivan.petrov@company.com';
</code></pre>
<h2 id="delete-Удаление-данных"><a class="header" href="#delete-Удаление-данных"><code>DELETE</code>: Удаление данных</a></h2>
<p>Команда <code>DELETE</code> удаляет строки из таблицы.</p>
<p><strong>Так же, как и с <code>UPDATE</code>, всегда используйте <code>WHERE</code>!</strong> <code>DELETE</code> без <code>WHERE</code> удалит <strong>ВСЕ</strong> данные из таблицы.</p>
<p><strong>Синтаксис:</strong></p>
<pre><code class="language-sql">DELETE FROM table_name
WHERE condition;
</code></pre>
<p><strong>Пример:</strong></p>
<pre><code class="language-sql">-- Увольняем сотрудника
DELETE FROM employees
WHERE email = 'new.employee@company.com';
</code></pre>
<h2 id="truncate-Быстрая-очистка-таблицы"><a class="header" href="#truncate-Быстрая-очистка-таблицы"><code>TRUNCATE</code>: Быстрая очистка таблицы</a></h2>
<p>Если вам нужно удалить абсолютно все строки из таблицы, команда <code>TRUNCATE</code> сделает это намного быстрее, чем <code>DELETE FROM table_name</code>.</p>
<p><code>TRUNCATE</code> не сканирует таблицу построчно, а просто сбрасывает ее до исходного состояния. Она также сбрасывает счетчики <code>SERIAL</code> полей.</p>
<p><strong>Синтаксис:</strong></p>
<pre><code class="language-sql">TRUNCATE TABLE table_name;

-- Если на таблицу есть внешние ключи, может потребоваться опция CASCADE
TRUNCATE TABLE table_name RESTART IDENTITY CASCADE;
-- RESTART IDENTITY - сброс счетчика
-- CASCADE - удалить зависимые записи в других таблицах
</code></pre>
<p><strong>Внимание:</strong> <code>TRUNCATE</code> — это DDL-подобная операция. Она выполняется очень быстро и её нельзя "откатить" в рамках обычной транзакции так же легко, как <code>DELETE</code>. Используйте с осторожностью.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="94-Нормализация-баз-данных"><a class="header" href="#94-Нормализация-баз-данных">9.4. Нормализация баз данных</a></h1>
<p>Проектирование структуры базы данных — один из важнейших этапов разработки. <strong>Нормализация</strong> — это формальный процесс организации данных в базе, главная цель которого — устранить избыточность (дублирование) данных и аномалии их изменения.</p>
<p><strong>Аномалии</strong> — это проблемы, которые возникают в плохо спроектированных базах данных:</p>
<ul>
<li><strong>Аномалия вставки</strong>: Невозможность вставить информацию об одном объекте без информации о другом. (Например, нельзя добавить новый курс, пока на него не запишется хотя бы один студент).</li>
<li><strong>Аномалия обновления</strong>: При изменении повторяющихся данных приходится обновлять их во всех местах, где они встречаются, что чревато ошибками. (Например, при смене названия курса его придется менять в записи у каждого студента).</li>
<li><strong>Аномалия удаления</strong>: Удаление одной части информации приводит к случайной потере другой. (Например, если последний студент отписался от курса, мы теряем всю информацию о существовании этого курса).</li>
</ul>
<p>Нормализация помогает спроектировать таблицы так, чтобы избежать этих проблем. Процесс состоит из последовательного приведения таблиц к <strong>нормальным формам</strong>.</p>
<h2 id="Первая-нормальная-форма-1nf"><a class="header" href="#Первая-нормальная-форма-1nf">Первая нормальная форма (1NF)</a></h2>
<p><strong>Правило:</strong> Таблица находится в 1NF, если все её атрибуты (значения в ячейках) являются <strong>атомарными</strong> (неделимыми). Проще говоря, в одной ячейке не может быть списка значений.</p>
<p><strong>Плохой пример (не в 1NF):</strong></p>
<div class="table-wrapper"><table><thead><tr><th>student_id</th><th>student_name</th><th>courses</th></tr></thead><tbody>
<tr><td>1</td><td>Иван Петров</td><td>'Математика, Физика'</td></tr>
<tr><td>2</td><td>Мария Козлова</td><td>'История'</td></tr>
</tbody></table>
</div>
<p>Здесь поле <code>courses</code> неатомарно. Это затрудняет поиск всех студентов курса "Физика" и требует парсинга строки.</p>
<p><strong>Хороший пример (в 1NF):</strong>
Для решения проблемы создают отдельную таблицу для связи студентов и курсов.</p>
<p><strong>Таблица <code>students</code>:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>student_id</th><th>student_name</th></tr></thead><tbody>
<tr><td>1</td><td>Иван Петров</td></tr>
<tr><td>2</td><td>Мария Козлова</td></tr>
</tbody></table>
</div>
<p><strong>Таблица <code>courses</code>:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>course_id</th><th>course_name</th></tr></thead><tbody>
<tr><td>101</td><td>Математика</td></tr>
<tr><td>102</td><td>Физика</td></tr>
<tr><td>103</td><td>История</td></tr>
</tbody></table>
</div>
<p><strong>Таблица <code>student_courses</code> (связующая):</strong></p>
<div class="table-wrapper"><table><thead><tr><th>student_id</th><th>course_id</th></tr></thead><tbody>
<tr><td>1</td><td>101</td></tr>
<tr><td>1</td><td>102</td></tr>
<tr><td>2</td><td>103</td></tr>
</tbody></table>
</div>
<p>Теперь все данные атомарны, и мы решили проблему 1NF.</p>
<h2 id="Вторая-нормальная-форма-2nf"><a class="header" href="#Вторая-нормальная-форма-2nf">Вторая нормальная форма (2NF)</a></h2>
<p><strong>Правило:</strong> Таблица находится в 2NF, если она:</p>
<ol>
<li>Находится в 1NF.</li>
<li>Все её неключевые атрибуты <strong>полностью зависимы</strong> от составного первичного ключа.</li>
</ol>
<p>Это правило актуально только для таблиц, у которых первичный ключ состоит из нескольких колонок (составной ключ). Оно означает, что ни один из неключевых столбцов не должен зависеть только от <em>части</em> составного ключа.</p>
<p><strong>Плохой пример (не в 2NF):</strong>
Предположим, у нас есть таблица оценок, где первичный ключ — (<code>student_id</code>, <code>course_id</code>).</p>
<div class="table-wrapper"><table><thead><tr><th>student_id</th><th>course_id</th><th><strong>course_name</strong></th><th>grade</th></tr></thead><tbody>
<tr><td>1</td><td>101</td><td>Математика</td><td>5</td></tr>
<tr><td>1</td><td>102</td><td>Физика</td><td>4</td></tr>
<tr><td>2</td><td>101</td><td>Математика</td><td>5</td></tr>
</tbody></table>
</div>
<p>Здесь <code>course_name</code> зависит только от <code>course_id</code>, то есть от <em>части</em> составного ключа. Это приводит к дублированию названия курса и аномалии обновления (если мы захотим переименовать "Математику" в "Высшую математику").</p>
<p><strong>Хороший пример (в 2NF):</strong>
Информация о курсах выносится в отдельную таблицу, как мы уже сделали в примере для 1NF. Таблица <code>student_courses</code> будет содержать только <code>student_id</code>, <code>course_id</code> и <code>grade</code>.</p>
<h2 id="Третья-нормальная-форма-3nf"><a class="header" href="#Третья-нормальная-форма-3nf">Третья нормальная форма (3NF)</a></h2>
<p><strong>Правило:</strong> Таблица находится в 3NF, если она:</p>
<ol>
<li>Находится в 2NF.</li>
<li>Отсутствуют <strong>транзитивные зависимости</strong>.</li>
</ol>
<p>Транзитивная зависимость — это когда неключевой атрибут зависит от другого неключевого атрибута.</p>
<p><strong>Плохой пример (не в 3NF):</strong>
Допустим, в таблице сотрудников есть данные о руководителе отдела.</p>
<div class="table-wrapper"><table><thead><tr><th>employee_id</th><th>employee_name</th><th>department_name</th><th><strong>department_head</strong></th></tr></thead><tbody>
<tr><td>1</td><td>Иван Петров</td><td>IT</td><td>Сидоров А.В.</td></tr>
<tr><td>2</td><td>Мария Козлова</td><td>IT</td><td>Сидоров А.В.</td></tr>
<tr><td>3</td><td>Ольга Морозова</td><td>HR</td><td>Иванова А.А.</td></tr>
</tbody></table>
</div>
<p>Здесь <code>department_head</code> зависит от <code>department_name</code>, который сам не является ключом. Если сменится глава IT-отдела, нам придется обновить это значение во всех строках для сотрудников IT. Это транзитивная зависимость (<code>employee_id</code> -&gt; <code>department_name</code> -&gt; <code>department_head</code>).</p>
<p><strong>Хороший пример (в 3NF):</strong>
Создаем отдельную таблицу <code>departments</code>.</p>
<p><strong>Таблица <code>employees</code>:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>employee_id</th><th>employee_name</th><th>department_id</th></tr></thead><tbody>
<tr><td>1</td><td>Иван Петров</td><td>1</td></tr>
<tr><td>2</td><td>Мария Козлова</td><td>1</td></tr>
<tr><td>3</td><td>Ольга Морозова</td><td>2</td></tr>
</tbody></table>
</div>
<p><strong>Таблица <code>departments</code>:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>department_id</th><th>department_name</th><th>department_head</th></tr></thead><tbody>
<tr><td>1</td><td>IT</td><td>Сидоров А.В.</td></tr>
<tr><td>2</td><td>HR</td><td>Иванова А.А.</td></tr>
</tbody></table>
</div>
<p>Теперь данные о руководителе хранятся в одном месте, и аномалии устранены.</p>
<h3 id="Итог"><a class="header" href="#Итог">Итог</a></h3>
<p>Чаще всего на практике достаточно приведения базы данных к 3NF. Это обеспечивает хороший баланс между устранением избыточности и сложностью схемы данных. Существуют и другие нормальные формы (BCNF, 4NF, 5NF), но они применяются для решения более специфических и редких проблем.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="95-Связи-между-таблицами"><a class="header" href="#95-Связи-между-таблицами">9.5. Связи между таблицами</a></h1>
<p>В реляционных базах данных информация разбита на множество таблиц. Чтобы эти данные имели смысл, таблицы должны быть связаны друг с другом. Механизм, обеспечивающий эти связи — это <strong>первичные</strong> и <strong>внешние ключи</strong>.</p>
<ul>
<li><strong>Первичный ключ (Primary Key)</strong>: Один или несколько столбцов, значения которых уникально идентифицируют каждую строку в таблице. Он не может содержать <code>NULL</code>.</li>
<li><strong>Внешний ключ (Foreign Key)</strong>: Один или несколько столбцов в таблице, которые ссылаются на первичный ключ в другой таблице. Это и есть "связь".</li>
</ul>
<h2 id="Типы-связей"><a class="header" href="#Типы-связей">Типы связей</a></h2>
<p>Существует три основных типа связей между таблицами.</p>
<h3 id="1-Один-ко-многим-one-to-many-1m"><a class="header" href="#1-Один-ко-многим-one-to-many-1m">1. Один-ко-многим (One-to-Many, 1:M)</a></h3>
<p>Это самый распространенный тип связи. Одна запись в "родительской" таблице (таблица "один") может быть связана с несколькими записями в "дочерней" таблице (таблица "многие").</p>
<p><strong>Пример:</strong> Один отдел — много сотрудников.</p>
<ul>
<li>Таблица <code>departments</code> (отделы) — родительская. Её первичный ключ <code>id</code>.</li>
<li>Таблица <code>employees</code> (сотрудники) — дочерняя. В ней есть внешний ключ <code>department_id</code>, который ссылается на <code>departments(id)</code>.</li>
</ul>
<p><strong>Реализация:</strong></p>
<pre><code class="language-sql">CREATE TABLE departments (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    full_name VARCHAR(100) NOT NULL,
    department_id INTEGER, -- Внешний ключ

    -- Устанавливаем связь
    FOREIGN KEY (department_id) REFERENCES departments (id)
);
</code></pre>
<p>Теперь у каждого сотрудника может быть только один отдел, но в одном отделе может быть много сотрудников.</p>
<h3 id="2-Многие-ко-многим-many-to-many-mn"><a class="header" href="#2-Многие-ко-многим-many-to-many-mn">2. Многие-ко-многим (Many-to-Many, M:N)</a></h3>
<p>Эта связь возникает, когда одна запись из таблицы А может быть связана с несколькими записями из таблицы Б, и наоборот.</p>
<p><strong>Пример:</strong> Студенты и курсы. Один студент может записаться на много курсов, и на одном курсе может учиться много студентов.</p>
<p>Такую связь нельзя реализовать напрямую. Для этого используется третья, <strong>связующая таблица</strong> (junction table).</p>
<p><strong>Реализация:</strong></p>
<pre><code class="language-sql">CREATE TABLE students (
    id SERIAL PRIMARY KEY,
    full_name VARCHAR(100) NOT NULL
);

CREATE TABLE courses (
    id SERIAL PRIMARY KEY,
    title VARCHAR(150) NOT NULL
);

-- Связующая таблица
CREATE TABLE student_courses (
    student_id INTEGER REFERENCES students(id),
    course_id INTEGER REFERENCES courses(id),
    enrollment_date DATE,
    
    -- Первичный ключ состоит из двух внешних ключей,
    -- чтобы пара (студент, курс) была уникальной.
    PRIMARY KEY (student_id, course_id)
);
</code></pre>
<p>В таблице <code>student_courses</code> каждая строка — это факт записи одного конкретного студента на один конкретный курс.</p>
<h3 id="3-Один-к-одному-one-to-one-11"><a class="header" href="#3-Один-к-одному-one-to-one-11">3. Один-к-одному (One-to-One, 1:1)</a></h3>
<p>Это самый редкий тип связи. Одна запись в таблице А может быть связана только с одной записью в таблице Б, и наоборот.</p>
<p>Обычно такую связь используют, чтобы:</p>
<ul>
<li>Разбить большую таблицу с множеством столбцов на части по логическому смыслу.</li>
<li>Вынести редко используемые данные в отдельную таблицу для оптимизации.</li>
<li>Реализовать более строгий контроль доступа к части данных.</li>
</ul>
<p><strong>Пример:</strong> Пользователи и их паспорта. У каждого пользователя может быть только один паспорт.</p>
<p><strong>Реализация:</strong>
Ключевым моментом является добавление ограничения <code>UNIQUE</code> к внешнему ключу.</p>
<pre><code class="language-sql">CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL
);

CREATE TABLE passports (
    id SERIAL PRIMARY KEY,
    series VARCHAR(4) NOT NULL,
    number VARCHAR(6) NOT NULL,
    user_id INTEGER NOT NULL UNIQUE, -- Уникальность обеспечивает связь 1:1

    FOREIGN KEY (user_id) REFERENCES users(id)
);
</code></pre>
<p>Ограничение <code>UNIQUE</code> на <code>user_id</code> в таблице <code>passports</code> не позволит создать две записи с одним и тем же <code>user_id</code>, обеспечивая связь "один-к-одному".</p>
<h2 id="Целостность-данных-referential-integrity"><a class="header" href="#Целостность-данных-referential-integrity">Целостность данных (Referential Integrity)</a></h2>
<p>Внешние ключи также помогают поддерживать целостность данных. Что должно произойти с сотрудниками, если мы удалим их отдел?</p>
<p>Для этого при определении внешнего ключа можно указать правила:</p>
<ul>
<li><code>ON DELETE</code>: Что делать в дочерней таблице, если связанная строка удаляется из родительской.</li>
<li><code>ON UPDATE</code>: Что делать, если значение первичного ключа в родительской таблице изменяется (редко, но возможно).</li>
</ul>
<p><strong>Основные действия:</strong></p>
<ul>
<li><code>RESTRICT</code> (или <code>NO ACTION</code>): Запретить удаление/изменение в родительской таблице, если есть связанные строки. Это поведение по умолчанию.</li>
<li><code>CASCADE</code>: Удалить/обновить связанные строки в дочерней таблице автоматически.</li>
<li><code>SET NULL</code>: Установить значение внешнего ключа в <code>NULL</code> в дочерней таблице.</li>
<li><code>SET DEFAULT</code>: Установить значение внешнего ключа в значение по умолчанию.</li>
</ul>
<p><strong>Пример с <code>CASCADE</code>:</strong></p>
<pre><code class="language-sql">-- При удалении отдела, все его сотрудники тоже будут удалены
FOREIGN KEY (department_id) REFERENCES departments (id) ON DELETE CASCADE;
</code></pre>
<p>Используйте <code>CASCADE</code> с большой осторожностью, так как это может привести к массовому удалению данных.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="96-join-операции"><a class="header" href="#96-join-операции">9.6. JOIN операции</a></h1>
<p>Оператор <code>JOIN</code> — это сердце реляционных баз данных. Он используется в запросах <code>SELECT</code> для объединения строк из двух или более таблиц на основе связанных столбцов. Без <code>JOIN</code> нам пришлось бы делать множество отдельных запросов и объединять данные вручную на стороне приложения, что крайне неэффективно.</p>
<p>Для примеров будем использовать наши таблицы <code>employees</code> и <code>departments</code>.</p>
<p><strong><code>departments</code></strong></p>
<div class="table-wrapper"><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody>
<tr><td>1</td><td>IT</td></tr>
<tr><td>2</td><td>HR</td></tr>
<tr><td>3</td><td>Marketing</td></tr>
</tbody></table>
</div>
<p><strong><code>employees</code></strong></p>
<div class="table-wrapper"><table><thead><tr><th>id</th><th>full_name</th><th>department_id</th></tr></thead><tbody>
<tr><td>1</td><td>Иван Петров</td><td>1</td></tr>
<tr><td>2</td><td>Мария Козлова</td><td>1</td></tr>
<tr><td>3</td><td>Анна Иванова</td><td>2</td></tr>
<tr><td>4</td><td>Сергей Безруков</td><td>NULL</td></tr>
</tbody></table>
</div>
<h2 id="inner-join-Внутреннее-соединение"><a class="header" href="#inner-join-Внутреннее-соединение"><code>INNER JOIN</code> (Внутреннее соединение)</a></h2>
<p>Возвращает только те строки, для которых условие соединения выполняется в <strong>обеих</strong> таблицах. Это самый частый тип <code>JOIN</code>. Если в одной из таблиц нет совпадения, строка не попадает в результат.</p>
<p><strong>Задача:</strong> Вывести список сотрудников и названия их отделов.</p>
<pre><code class="language-sql">SELECT
    e.full_name,
    d.name
FROM
    employees AS e
INNER JOIN
    departments AS d ON e.department_id = d.id;
</code></pre>
<p><strong>Результат:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>full_name</th><th>name</th></tr></thead><tbody>
<tr><td>Иван Петров</td><td>IT</td></tr>
<tr><td>Мария Козлова</td><td>IT</td></tr>
<tr><td>Анна Иванова</td><td>HR</td></tr>
</tbody></table>
</div>
<p>Обратите внимание: Сергей Безруков (без отдела) и отдел Marketing (без сотрудников) не попали в выборку.</p>
<p><em>Диаграмма Венна: пересечение двух множеств.</em>
<img src="https://i.imgur.com/39m2s2b.png" alt="INNER JOIN" /></p>
<h2 id="left-join-Левое-внешнее-соединение"><a class="header" href="#left-join-Левое-внешнее-соединение"><code>LEFT JOIN</code> (Левое внешнее соединение)</a></h2>
<p>Возвращает <strong>все</strong> строки из <strong>левой</strong> таблицы (первой, указанной в <code>FROM</code>) и совпадающие строки из правой таблицы. Если совпадения в правой таблице нет, то для её столбцов возвращается <code>NULL</code>.</p>
<p><strong>Задача:</strong> Вывести <strong>всех</strong> сотрудников и, если возможно, названия их отделов.</p>
<pre><code class="language-sql">SELECT
    e.full_name,
    d.name
FROM
    employees AS e
LEFT JOIN
    departments AS d ON e.department_id = d.id;
</code></pre>
<p><strong>Результат:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>full_name</th><th>name</th></tr></thead><tbody>
<tr><td>Иван Петров</td><td>IT</td></tr>
<tr><td>Мария Козлова</td><td>IT</td></tr>
<tr><td>Анна Иванова</td><td>HR</td></tr>
<tr><td>Сергей Безруков</td><td><strong>NULL</strong></td></tr>
</tbody></table>
</div>
<p>Теперь в результате есть все сотрудники, включая тех, у кого нет отдела.</p>
<p><em>Диаграмма Венна: все левое множество.</em>
<img src="https://i.imgur.com/k2jCflI.png" alt="LEFT JOIN" /></p>
<h2 id="right-join-Правое-внешнее-соединение"><a class="header" href="#right-join-Правое-внешнее-соединение"><code>RIGHT JOIN</code> (Правое внешнее соединение)</a></h2>
<p>Работает зеркально <code>LEFT JOIN</code>. Возвращает <strong>все</strong> строки из <strong>правой</strong> таблицы (указанной в <code>JOIN</code>) и совпадающие из левой. Если совпадения в левой таблице нет, для её столбцов будет <code>NULL</code>.</p>
<p><strong>Задача:</strong> Вывести все отделы и, если возможно, сотрудников в них.</p>
<pre><code class="language-sql">SELECT
    e.full_name,
    d.name
FROM
    employees AS e
RIGHT JOIN
    departments AS d ON e.department_id = d.id;
</code></pre>
<p><strong>Результат:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>full_name</th><th>name</th></tr></thead><tbody>
<tr><td>Иван Петров</td><td>IT</td></tr>
<tr><td>Мария Козлова</td><td>IT</td></tr>
<tr><td>Анна Иванова</td><td>HR</td></tr>
<tr><td><strong>NULL</strong></td><td>Marketing</td></tr>
</tbody></table>
</div>
<p>Теперь в результате есть все отделы, включая те, в которых нет сотрудников. На практике <code>RIGHT JOIN</code> используется редко, так как почти любой такой запрос можно переписать через <code>LEFT JOIN</code>, поменяв таблицы местами, что обычно проще для восприятия.</p>
<p><em>Диаграмма Венна: все правое множество.</em>
<img src="https://i.imgur.com/EE2Y21c.png" alt="RIGHT JOIN" /></p>
<h2 id="full-outer-join-Полное-внешнее-соединение"><a class="header" href="#full-outer-join-Полное-внешнее-соединение"><code>FULL OUTER JOIN</code> (Полное внешнее соединение)</a></h2>
<p>Объединяет <code>LEFT JOIN</code> и <code>RIGHT JOIN</code>. Возвращает <strong>все</strong> строки из <strong>обеих</strong> таблиц. Если для строки из одной таблицы нет совпадения в другой, недостающие значения заполняются <code>NULL</code>.</p>
<p><strong>Задача:</strong> Вывести всех сотрудников и все отделы, сопоставив их там, где это возможно.</p>
<pre><code class="language-sql">SELECT
    e.full_name,
    d.name
FROM
    employees AS e
FULL OUTER JOIN
    departments AS d ON e.department_id = d.id;
</code></pre>
<p><strong>Результат:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>full_name</th><th>name</th></tr></thead><tbody>
<tr><td>Иван Петров</td><td>IT</td></tr>
<tr><td>Мария Козлова</td><td>IT</td></tr>
<tr><td>Анна Иванова</td><td>HR</td></tr>
<tr><td>Сергей Безруков</td><td><strong>NULL</strong></td></tr>
<tr><td><strong>NULL</strong></td><td>Marketing</td></tr>
</tbody></table>
</div>
<p>В результате присутствуют и сотрудник без отдела, и отдел без сотрудников.</p>
<p><em>Диаграмма Венна: объединение двух множеств.</em>
<img src="https://i.imgur.com/PznDoW4.png" alt="FULL OUTER JOIN" /></p>
<h2 id="Другие-виды-соединений"><a class="header" href="#Другие-виды-соединений">Другие виды соединений</a></h2>
<ul>
<li><strong><code>CROSS JOIN</code></strong>: Возвращает декартово произведение двух таблиц (каждая строка одной таблицы соединяется с каждой строкой другой). Используется редко.</li>
<li><strong><code>NATURAL JOIN</code></strong>: <code>JOIN</code> по всем столбцам с одинаковыми именами. Считается плохой практикой, так как он неявный и может привести к ошибкам, если в таблицы добавятся новые столбцы с совпадающими именами.</li>
<li><strong>Self-join (Соединение таблицы с самой собой)</strong>: Иногда нужно соединить таблицу саму с собой. Например, чтобы для каждого сотрудника найти имя его менеджера (который тоже является сотрудником). Это делается через присвоение таблице разных псевдонимов (<code>AS</code>).</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практика"><a class="header" href="#Практика">Практика</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практика-Определение-данных-ddl"><a class="header" href="#Практика-Определение-данных-ddl">Практика: Определение данных (DDL)</a></h1>
<p>В этой секции мы попрактикуемся в создании и изменении структуры таблиц.</p>
<h2 id="Упражнение-1-Создание-таблицы-products"><a class="header" href="#Упражнение-1-Создание-таблицы-products">Упражнение 1: Создание таблицы <code>products</code></a></h2>
<p>Создайте таблицу для хранения информации о продуктах в интернет-магазине.</p>
<p><strong>Требования к таблице <code>products</code>:</strong></p>
<ol>
<li><code>id</code>: Уникальный идентификатор, автоинкрементный. Должен быть первичным ключом.</li>
<li><code>name</code>: Название продукта. Текстовое поле, не может быть пустым.</li>
<li><code>sku</code>: Артикул (Stock Keeping Unit). Уникальная строка до 50 символов.</li>
<li><code>description</code>: Описание продукта. Текстовое поле произвольной длины.</li>
<li><code>price</code>: Цена. Число с точностью до 2 знаков после запятой. Не может быть отрицательным.</li>
<li><code>stock_quantity</code>: Количество на складе. Целое число, по умолчанию 0.</li>
<li><code>created_at</code>: Дата и время создания записи. Должно устанавливаться автоматически.</li>
</ol>
<pre><code class="language-sql editable">-- Ваш код для создания таблицы products здесь

</code></pre>
<h2 id="Упражнение-2-Создание-таблицы-categories"><a class="header" href="#Упражнение-2-Создание-таблицы-categories">Упражнение 2: Создание таблицы <code>categories</code></a></h2>
<p>Создайте таблицу для категорий продуктов.</p>
<p><strong>Требования к таблице <code>categories</code>:</strong></p>
<ol>
<li><code>id</code>: Уникальный автоинкрементный идентификатор (первичный ключ).</li>
<li><code>name</code>: Название категории, уникальное, не может быть пустым.</li>
<li><code>parent_category_id</code>: Ссылка на родительскую категорию (в этой же таблице). Это позволяет создавать иерархию категорий (например, "Электроника" -&gt; "Смартфоны"). Может быть <code>NULL</code>, если это категория верхнего уровня.</li>
</ol>
<pre><code class="language-sql editable">-- Ваш код для создания таблицы categories здесь

</code></pre>
<h2 id="Упражнение-3-Связывание-продуктов-и-категорий"><a class="header" href="#Упражнение-3-Связывание-продуктов-и-категорий">Упражнение 3: Связывание продуктов и категорий</a></h2>
<p>Продукты и категории должны иметь связь "многие-ко-многим". Один продукт может быть в нескольких категориях, и в одной категории может быть много продуктов.</p>
<p>Создайте для этого связующую таблицу <code>product_categories</code>.</p>
<p><strong>Требования к таблице:</strong></p>
<ol>
<li>Она должна содержать два поля: <code>product_id</code> и <code>category_id</code>.</li>
<li>Оба поля должны быть внешними ключами, ссылающимися на соответствующие таблицы.</li>
<li>Пара (<code>product_id</code>, <code>category_id</code>) должна быть уникальной, чтобы избежать дублирования связей. Сделайте эту пару составным первичным ключом.</li>
<li>При удалении продукта или категории соответствующая запись в этой таблице должна удаляться автоматически.</li>
</ol>
<pre><code class="language-sql editable">-- Ваш код для создания таблицы product_categories здесь

</code></pre>
<h2 id="Упражнение-4-Изменение-таблицы-products"><a class="header" href="#Упражнение-4-Изменение-таблицы-products">Упражнение 4: Изменение таблицы <code>products</code></a></h2>
<p>Добавьте в таблицу <code>products</code> новые поля и измените существующие.</p>
<p><strong>Задачи:</strong></p>
<ol>
<li>Добавьте поле <code>is_published</code> типа <code>BOOLEAN</code> со значением по умолчанию <code>FALSE</code>.</li>
<li>Добавьте поле <code>weight_kg</code> типа <code>NUMERIC(8, 3)</code>.</li>
<li>Измените название поля <code>sku</code> на <code>article</code>.</li>
</ol>
<pre><code class="language-sql editable">-- Ваш код для изменения таблицы products здесь

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практика-Манипуляция-данными-dml-и-join"><a class="header" href="#Практика-Манипуляция-данными-dml-и-join">Практика: Манипуляция данными (DML и JOIN)</a></h1>
<p>В этой секции мы будем наполнять наши таблицы данными и извлекать их с помощью <code>JOIN</code>. Убедитесь, что вы успешно выполнили предыдущие упражнения по DDL.</p>
<h2 id="Упражнение-1-Наполнение-таблиц"><a class="header" href="#Упражнение-1-Наполнение-таблиц">Упражнение 1: Наполнение таблиц</a></h2>
<p>Заполните таблицы <code>categories</code> и <code>products</code> начальными данными.</p>
<p><strong>Задачи:</strong></p>
<ol>
<li>Добавьте категории: "Электроника", "Книги", "Бытовая техника".</li>
<li>Добавьте подкатегорию "Смартфоны" для "Электроники".</li>
<li>Добавьте три продукта:
<ul>
<li>Смартфон "Pixel 8" по цене 70000 с артикулом "P8-128".</li>
<li>Книгу "Чистый код" по цене 1200 с артикулом "CL-CODE".</li>
<li>Холодильник "Атлант" по цене 45000 с артикулом "ATL-200".</li>
</ul>
</li>
<li>Свяжите "Pixel 8" с категориями "Электроника" и "Смартфоны".</li>
<li>Свяжите "Чистый код" с категорией "Книги".</li>
</ol>
<pre><code class="language-sql editable">-- 1. Добавляем категории
INSERT INTO categories ...

-- 2. Добавляем подкатегорию
-- (Сначала нужно узнать id "Электроники")


-- 3. Добавляем продукты


-- 4, 5. Связываем продукты и категории

</code></pre>
<h2 id="Упражнение-2-inner-join"><a class="header" href="#Упражнение-2-inner-join">Упражнение 2: <code>INNER JOIN</code></a></h2>
<p>Напишите запрос, который выводит <strong>только те</strong> продукты, которые состоят хотя бы в одной категории.</p>
<p><strong>Требуемые поля:</strong></p>
<ul>
<li><code>products.name</code> (название продукта)</li>
<li><code>products.price</code> (цена)</li>
<li><code>categories.name</code> (название категории)</li>
</ul>
<pre><code class="language-sql editable">-- Ваш код здесь

</code></pre>
<h2 id="Упражнение-3-left-join"><a class="header" href="#Упражнение-3-left-join">Упражнение 3: <code>LEFT JOIN</code></a></h2>
<p>Напишите запрос, который выводит <strong>все</strong> продукты и их категории. Если у продукта нет категории, поле категории должно содержать <code>NULL</code>.</p>
<p><strong>Требуемые поля:</strong></p>
<ul>
<li><code>products.name</code> (название продукта)</li>
<li><code>categories.name</code> (название категории)</li>
</ul>
<p><strong>Задача со звездочкой:</strong> Отсортируйте результат так, чтобы продукты без категорий шли первыми.</p>
<pre><code class="language-sql editable">-- Ваш код здесь

</code></pre>
<h2 id="Упражнение-4-right-join-и-агрегация"><a class="header" href="#Упражнение-4-right-join-и-агрегация">Упражнение 4: <code>RIGHT JOIN</code> и агрегация</a></h2>
<p>Напишите запрос, который выводит <strong>все</strong> категории и количество продуктов в каждой из них. Категории без продуктов тоже должны быть в списке с количеством <code>0</code>.</p>
<p><strong>Требуемые поля:</strong></p>
<ul>
<li><code>categories.name</code> (название категории)</li>
<li><code>product_count</code> (рассчитанное поле количества продуктов)</li>
</ul>
<p><strong>Подсказка:</strong> Используйте <code>COUNT(products.id)</code> и <code>GROUP BY</code>.</p>
<pre><code class="language-sql editable">-- Ваш код здесь

</code></pre>
<h2 id="Упражнение-5-self-join-соединение-с-собой"><a class="header" href="#Упражнение-5-self-join-соединение-с-собой">Упражнение 5: Self-Join (соединение с собой)</a></h2>
<p>Выведите все категории, у которых есть родительская категория.</p>
<p><strong>Требуемые поля:</strong></p>
<ul>
<li><code>child_name</code> (имя дочерней категории)</li>
<li><code>parent_name</code> (имя родительской категории)</li>
</ul>
<p><strong>Подсказка:</strong> Вам нужно будет соединить таблицу <code>categories</code> саму с собой, используя псевдонимы, например <code>c1</code> и <code>c2</code>.</p>
<pre><code class="language-sql editable">-- Ваш код здесь

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Решения-Определение-данных-ddl"><a class="header" href="#Решения-Определение-данных-ddl">Решения: Определение данных (DDL)</a></h1>
<h2 id="Решение-1-Создание-таблицы-products"><a class="header" href="#Решение-1-Создание-таблицы-products">Решение 1: Создание таблицы <code>products</code></a></h2>
<pre><code class="language-sql runnable">CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    sku VARCHAR(50) UNIQUE,
    description TEXT,
    price NUMERIC(10, 2) NOT NULL CHECK (price &gt;= 0),
    stock_quantity INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Проверим, что таблица создалась
SELECT * FROM products;
</code></pre>
<h2 id="Решение-2-Создание-таблицы-categories"><a class="header" href="#Решение-2-Создание-таблицы-categories">Решение 2: Создание таблицы <code>categories</code></a></h2>
<pre><code class="language-sql runnable">CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL UNIQUE,
    parent_category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL
);

-- Проверим, что таблица создалась
SELECT * FROM categories;
</code></pre>
<p><em>Примечание: <code>ON DELETE SET NULL</code> означает, что если родительская категория будет удалена, у дочерних категорий это поле станет <code>NULL</code>, и они превратятся в категории верхнего уровня.</em></p>
<h2 id="Решение-3-Связывание-продуктов-и-категорий"><a class="header" href="#Решение-3-Связывание-продуктов-и-категорий">Решение 3: Связывание продуктов и категорий</a></h2>
<pre><code class="language-sql runnable">CREATE TABLE product_categories (
    product_id INTEGER NOT NULL REFERENCES products(id) ON DELETE CASCADE,
    category_id INTEGER NOT NULL REFERENCES categories(id) ON DELETE CASCADE,
    PRIMARY KEY (product_id, category_id)
);

-- Проверим структуру таблицы (данных пока нет)
\d product_categories
</code></pre>
<p><em>Примечание: <code>ON DELETE CASCADE</code> здесь очень важен. Он гарантирует, что при удалении продукта или категории, их связи в этой таблице будут автоматически удалены, предотвращая появление "мусорных" ссылок.</em></p>
<h2 id="Решение-4-Изменение-таблицы-products"><a class="header" href="#Решение-4-Изменение-таблицы-products">Решение 4: Изменение таблицы <code>products</code></a></h2>
<pre><code class="language-sql runnable">-- 1. Добавляем поле is_published
ALTER TABLE products ADD COLUMN is_published BOOLEAN DEFAULT FALSE;

-- 2. Добавляем поле weight_kg
ALTER TABLE products ADD COLUMN weight_kg NUMERIC(8, 3);

-- 3. Переименовываем sku в article
ALTER TABLE products RENAME COLUMN sku TO article;

-- Проверим новую структуру таблицы
\d products
</code></pre>
<p><em>Примечание: Команда <code>\d</code> является специфичной для клиента <code>psql</code> и может не работать в других SQL-инструментах. Она используется здесь для демонстрации и позволяет быстро посмотреть структуру таблицы.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Решения-Манипуляция-данными-dml-и-join"><a class="header" href="#Решения-Манипуляция-данными-dml-и-join">Решения: Манипуляция данными (DML и JOIN)</a></h1>
<h2 id="Решение-1-Наполнение-таблиц"><a class="header" href="#Решение-1-Наполнение-таблиц">Решение 1: Наполнение таблиц</a></h2>
<pre><code class="language-sql runnable">-- 1. Добавляем категории
INSERT INTO categories (name) VALUES ('Электроника'), ('Книги'), ('Бытовая техника');

-- 2. Добавляем подкатегорию "Смартфоны"
-- Сначала получаем id категории "Электроника"
INSERT INTO categories (name, parent_category_id)
SELECT 'Смартфоны', id FROM categories WHERE name = 'Электроника';

-- 3. Добавляем продукты
-- (предположим, что колонка 'article' уже существует после ALTER TABLE)
INSERT INTO products (name, price, article) VALUES
('Pixel 8', 70000, 'P8-128'),
('Чистый код', 1200, 'CL-CODE'),
('Холодильник Атлант', 45000, 'ATL-200');

-- 4, 5. Связываем продукты и категории
INSERT INTO product_categories (product_id, category_id)
VALUES
    ((SELECT id FROM products WHERE article = 'P8-128'), (SELECT id FROM categories WHERE name = 'Электроника')),
    ((SELECT id FROM products WHERE article = 'P8-128'), (SELECT id FROM categories WHERE name = 'Смартфоны')),
    ((SELECT id FROM products WHERE article = 'CL-CODE'), (SELECT id FROM categories WHERE name = 'Книги'));

-- Посмотрим на результат
SELECT * FROM product_categories;
</code></pre>
<h2 id="Решение-2-inner-join"><a class="header" href="#Решение-2-inner-join">Решение 2: <code>INNER JOIN</code></a></h2>
<pre><code class="language-sql runnable">SELECT
    p.name AS product_name,
    p.price,
    c.name AS category_name
FROM
    products AS p
JOIN
    product_categories AS pc ON p.id = pc.product_id
JOIN
    categories AS c ON pc.category_id = c.id;
</code></pre>
<p><em>Замечание: Здесь используется два <code>JOIN</code>, чтобы связать <code>products</code> с <code>categories</code> через промежуточную таблицу <code>product_categories</code>.</em></p>
<h2 id="Решение-3-left-join"><a class="header" href="#Решение-3-left-join">Решение 3: <code>LEFT JOIN</code></a></h2>
<pre><code class="language-sql runnable">SELECT
    p.name AS product_name,
    c.name AS category_name
FROM
    products AS p
LEFT JOIN
    product_categories AS pc ON p.id = pc.product_id
LEFT JOIN
    categories AS c ON pc.category_id = c.id
ORDER BY
    c.name NULLS FIRST;
</code></pre>
<p><em>Замечание: <code>ORDER BY c.name NULLS FIRST</code> — это специфичная для PostgreSQL (и стандарта SQL) конструкция, которая позволяет явно управлять сортировкой <code>NULL</code> значений.</em></p>
<h2 id="Решение-4-right-join-и-агрегация"><a class="header" href="#Решение-4-right-join-и-агрегация">Решение 4: <code>RIGHT JOIN</code> и агрегация</a></h2>
<pre><code class="language-sql runnable">SELECT
    c.name AS category_name,
    COUNT(p.id) AS product_count
FROM
    products AS p
JOIN
    product_categories AS pc ON p.id = pc.product_id
RIGHT JOIN
    categories AS c ON pc.category_id = c.id
GROUP BY
    c.name
ORDER BY
    product_count DESC;
</code></pre>
<p><em>Замечание: Мы используем <code>RIGHT JOIN</code> от <code>categories</code> к <code>product_categories</code>, чтобы гарантированно включить все категории. <code>COUNT(p.id)</code> посчитает <code>NULL</code> как 0, что нам и нужно.</em></p>
<h2 id="Решение-5-self-join-соединение-с-собой"><a class="header" href="#Решение-5-self-join-соединение-с-собой">Решение 5: Self-Join (соединение с собой)</a></h2>
<pre><code class="language-sql runnable">SELECT
    child.name AS child_name,
    parent.name AS parent_name
FROM
    categories AS child
JOIN
    categories AS parent ON child.parent_category_id = parent.id;
</code></pre>
<p><em>Замечание: Мы берем таблицу <code>categories</code> дважды под разными "именами" (<code>child</code> и <code>parent</code>) и соединяем их по полю <code>parent_category_id</code>, которое ссылается на <code>id</code> в той же таблице.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Проект-Автосалон-Врум-Бум"><a class="header" href="#Проект-Автосалон-Врум-Бум">Проект: Автосалон "Врум-Бум"</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Обзор-модуля-1"><a class="header" href="#Обзор-модуля-1">Обзор модуля</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Теория-2"><a class="header" href="#Теория-2">Теория</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Подзапросы-и-cte"><a class="header" href="#Подзапросы-и-cte">Подзапросы и CTE</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Оконные-функции"><a class="header" href="#Оконные-функции">Оконные функции</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Представления"><a class="header" href="#Представления">Представления</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Продвинутые-типы-данных"><a class="header" href="#Продвинутые-типы-данных">Продвинутые типы данных</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Геоданные-и-postgis"><a class="header" href="#Геоданные-и-postgis">Геоданные и PostGIS</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Транзакции"><a class="header" href="#Транзакции">Транзакции</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практика-1"><a class="header" href="#Практика-1">Практика</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Проект-gastrohub"><a class="header" href="#Проект-gastrohub">Проект: GastroHub</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Обзор-модуля-2"><a class="header" href="#Обзор-модуля-2">Обзор модуля</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Теория-3"><a class="header" href="#Теория-3">Теория</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Процедуры-и-функции"><a class="header" href="#Процедуры-и-функции">Процедуры и функции</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="plpgsql"><a class="header" href="#plpgsql">PL/pgSQL</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Триггеры"><a class="header" href="#Триггеры">Триггеры</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практика-2"><a class="header" href="#Практика-2">Практика</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Проект-dream-big-hr"><a class="header" href="#Проект-dream-big-hr">Проект: Dream Big HR</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Обзор-модуля-3"><a class="header" href="#Обзор-модуля-3">Обзор модуля</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Теория-4"><a class="header" href="#Теория-4">Теория</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Технология-orm"><a class="header" href="#Технология-orm">Технология ORM</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Оптимизация-запросов"><a class="header" href="#Оптимизация-запросов">Оптимизация запросов</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Индексы"><a class="header" href="#Индексы">Индексы</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Анализ-планов-выполнения"><a class="header" href="#Анализ-планов-выполнения">Анализ планов выполнения</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Практика-3"><a class="header" href="#Практика-3">Практика</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Проект-Оптимизация-доставки"><a class="header" href="#Проект-Оптимизация-доставки">Проект: Оптимизация доставки</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Справочник-sql"><a class="header" href="#Справочник-sql">Справочник SQL</a></h1>
<h2 id="Основные-команды"><a class="header" href="#Основные-команды">Основные команды</a></h2>
<h3 id="ddl-data-definition-language"><a class="header" href="#ddl-data-definition-language">DDL (Data Definition Language)</a></h3>
<h4 id="create-table-1"><a class="header" href="#create-table-1">CREATE TABLE</a></h4>
<pre><code class="language-sql">CREATE TABLE table_name (
    column1 datatype constraint,
    column2 datatype constraint,
    ...
);
</code></pre>
<h4 id="alter-table"><a class="header" href="#alter-table">ALTER TABLE</a></h4>
<pre><code class="language-sql">ALTER TABLE table_name 
ADD COLUMN column_name datatype;

ALTER TABLE table_name 
DROP COLUMN column_name;

ALTER TABLE table_name 
MODIFY COLUMN column_name new_datatype;
</code></pre>
<h4 id="drop-table"><a class="header" href="#drop-table">DROP TABLE</a></h4>
<pre><code class="language-sql">DROP TABLE table_name;
</code></pre>
<h3 id="dml-data-manipulation-language"><a class="header" href="#dml-data-manipulation-language">DML (Data Manipulation Language)</a></h3>
<h4 id="select"><a class="header" href="#select">SELECT</a></h4>
<pre><code class="language-sql">SELECT column1, column2, ...
FROM table_name
WHERE condition
GROUP BY column1, column2, ...
HAVING condition
ORDER BY column1, column2, ...
LIMIT number;
</code></pre>
<h4 id="insert"><a class="header" href="#insert">INSERT</a></h4>
<pre><code class="language-sql">INSERT INTO table_name (column1, column2, ...)
VALUES (value1, value2, ...);
</code></pre>
<h4 id="update"><a class="header" href="#update">UPDATE</a></h4>
<pre><code class="language-sql">UPDATE table_name
SET column1 = value1, column2 = value2, ...
WHERE condition;
</code></pre>
<h4 id="delete"><a class="header" href="#delete">DELETE</a></h4>
<pre><code class="language-sql">DELETE FROM table_name
WHERE condition;
</code></pre>
<h2 id="Типы-данных-postgresql"><a class="header" href="#Типы-данных-postgresql">Типы данных PostgreSQL</a></h2>
<h3 id="Числовые-типы"><a class="header" href="#Числовые-типы">Числовые типы</a></h3>
<ul>
<li><code>INTEGER</code> / <code>INT</code> - целое число</li>
<li><code>BIGINT</code> - большое целое число</li>
<li><code>DECIMAL(p,s)</code> / <code>NUMERIC(p,s)</code> - точное число</li>
<li><code>REAL</code> / <code>FLOAT4</code> - число с плавающей точкой</li>
<li><code>DOUBLE PRECISION</code> / <code>FLOAT8</code> - двойная точность</li>
</ul>
<h3 id="Символьные-типы"><a class="header" href="#Символьные-типы">Символьные типы</a></h3>
<ul>
<li><code>CHAR(n)</code> - строка фиксированной длины</li>
<li><code>VARCHAR(n)</code> - строка переменной длины</li>
<li><code>TEXT</code> - строка неограниченной длины</li>
</ul>
<h3 id="Типы-датавремя"><a class="header" href="#Типы-датавремя">Типы дата/время</a></h3>
<ul>
<li><code>DATE</code> - дата</li>
<li><code>TIME</code> - время</li>
<li><code>TIMESTAMP</code> - дата и время</li>
<li><code>TIMESTAMPTZ</code> - дата и время с часовым поясом</li>
</ul>
<h3 id="Другие-типы"><a class="header" href="#Другие-типы">Другие типы</a></h3>
<ul>
<li><code>BOOLEAN</code> - логический тип</li>
<li><code>UUID</code> - уникальный идентификатор</li>
<li><code>JSON</code> / <code>JSONB</code> - JSON данные</li>
<li><code>ARRAY</code> - массив</li>
</ul>
<h2 id="Функции"><a class="header" href="#Функции">Функции</a></h2>
<h3 id="Агрегатные-функции-1"><a class="header" href="#Агрегатные-функции-1">Агрегатные функции</a></h3>
<ul>
<li><code>COUNT(*)</code> - количество строк</li>
<li><code>SUM(column)</code> - сумма значений</li>
<li><code>AVG(column)</code> - среднее значение</li>
<li><code>MIN(column)</code> - минимальное значение</li>
<li><code>MAX(column)</code> - максимальное значение</li>
</ul>
<h3 id="Строковые-функции"><a class="header" href="#Строковые-функции">Строковые функции</a></h3>
<ul>
<li><code>LENGTH(string)</code> - длина строки</li>
<li><code>UPPER(string)</code> - в верхний регистр</li>
<li><code>LOWER(string)</code> - в нижний регистр</li>
<li><code>TRIM(string)</code> - удаление пробелов</li>
<li><code>SUBSTRING(string, start, length)</code> - подстрока</li>
</ul>
<h3 id="Функции-даты-и-времени"><a class="header" href="#Функции-даты-и-времени">Функции даты и времени</a></h3>
<ul>
<li><code>NOW()</code> - текущая дата и время</li>
<li><code>CURRENT_DATE</code> - текущая дата</li>
<li><code>CURRENT_TIME</code> - текущее время</li>
<li><code>EXTRACT(part FROM date)</code> - извлечение части даты</li>
</ul>
<h2 id="join-операции"><a class="header" href="#join-операции">JOIN операции</a></h2>
<h3 id="inner-join"><a class="header" href="#inner-join">INNER JOIN</a></h3>
<pre><code class="language-sql">SELECT columns
FROM table1
INNER JOIN table2 ON table1.column = table2.column;
</code></pre>
<h3 id="left-join"><a class="header" href="#left-join">LEFT JOIN</a></h3>
<pre><code class="language-sql">SELECT columns
FROM table1
LEFT JOIN table2 ON table1.column = table2.column;
</code></pre>
<h3 id="right-join"><a class="header" href="#right-join">RIGHT JOIN</a></h3>
<pre><code class="language-sql">SELECT columns
FROM table1
RIGHT JOIN table2 ON table1.column = table2.column;
</code></pre>
<h3 id="full-outer-join"><a class="header" href="#full-outer-join">FULL OUTER JOIN</a></h3>
<pre><code class="language-sql">SELECT columns
FROM table1
FULL OUTER JOIN table2 ON table1.column = table2.column;
</code></pre>
<h2 id="Подзапросы-1"><a class="header" href="#Подзапросы-1">Подзапросы</a></h2>
<h3 id="В-where"><a class="header" href="#В-where">В WHERE</a></h3>
<pre><code class="language-sql">SELECT column1
FROM table1
WHERE column2 IN (SELECT column2 FROM table2 WHERE condition);
</code></pre>
<h3 id="В-select"><a class="header" href="#В-select">В SELECT</a></h3>
<pre><code class="language-sql">SELECT column1, 
       (SELECT COUNT(*) FROM table2 WHERE table2.id = table1.id) as count
FROM table1;
</code></pre>
<h2 id="Оконные-функции-1"><a class="header" href="#Оконные-функции-1">Оконные функции</a></h2>
<h3 id="row_number"><a class="header" href="#row_number">ROW_NUMBER()</a></h3>
<pre><code class="language-sql">SELECT column1, 
       ROW_NUMBER() OVER (ORDER BY column2) as row_num
FROM table_name;
</code></pre>
<h3 id="rank"><a class="header" href="#rank">RANK()</a></h3>
<pre><code class="language-sql">SELECT column1, 
       RANK() OVER (ORDER BY column2 DESC) as rank
FROM table_name;
</code></pre>
<h3 id="Агрегаты-с-окном"><a class="header" href="#Агрегаты-с-окном">Агрегаты с окном</a></h3>
<pre><code class="language-sql">SELECT column1, 
       SUM(column2) OVER (PARTITION BY column3) as total
FROM table_name;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Шпаргалки"><a class="header" href="#Шпаргалки">Шпаргалки</a></h1>
<h2 id="Быстрый-справочник-postgresql"><a class="header" href="#Быстрый-справочник-postgresql">Быстрый справочник PostgreSQL</a></h2>
<h3 id="Основные-команды-psql"><a class="header" href="#Основные-команды-psql">Основные команды psql</a></h3>
<pre><code class="language-bash"># Подключение к базе данных
psql -U username -d database_name -h hostname

# Список баз данных
\l

# Подключение к базе данных
\c database_name

# Список таблиц
\dt

# Описание таблицы
\d table_name

# Список пользователей
\du

# Выход
\q

# Включить отображение времени выполнения
\timing

# Выполнить SQL из файла
\i filename.sql
</code></pre>
<h3 id="Часто-используемые-запросы"><a class="header" href="#Часто-используемые-запросы">Часто используемые запросы</a></h3>
<h4 id="Информация-о-базе-данных"><a class="header" href="#Информация-о-базе-данных">Информация о базе данных</a></h4>
<pre><code class="language-sql">-- Размер базы данных
SELECT pg_size_pretty(pg_database_size('database_name'));

-- Список всех таблиц с размерами
SELECT 
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables 
WHERE schemaname NOT IN ('information_schema', 'pg_catalog')
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;

-- Активные подключения
SELECT * FROM pg_stat_activity;
</code></pre>
<h4 id="Работа-с-индексами"><a class="header" href="#Работа-с-индексами">Работа с индексами</a></h4>
<pre><code class="language-sql">-- Создание индекса
CREATE INDEX idx_name ON table_name (column_name);

-- Уникальный индекс
CREATE UNIQUE INDEX idx_name ON table_name (column_name);

-- Составной индекс
CREATE INDEX idx_name ON table_name (col1, col2);

-- Удаление индекса
DROP INDEX idx_name;

-- Список индексов таблицы
SELECT indexname, indexdef 
FROM pg_indexes 
WHERE tablename = 'table_name';
</code></pre>
<h4 id="Анализ-производительности"><a class="header" href="#Анализ-производительности">Анализ производительности</a></h4>
<pre><code class="language-sql">-- План выполнения запроса
EXPLAIN SELECT * FROM table_name WHERE condition;

-- Детальный план выполнения
EXPLAIN ANALYZE SELECT * FROM table_name WHERE condition;

-- Статистика по запросам (требует pg_stat_statements)
SELECT 
    query,
    calls,
    total_time,
    mean_time,
    rows
FROM pg_stat_statements 
ORDER BY mean_time DESC 
LIMIT 10;
</code></pre>
<h3 id="Типичные-паттерны"><a class="header" href="#Типичные-паттерны">Типичные паттерны</a></h3>
<h4 id="Пагинация"><a class="header" href="#Пагинация">Пагинация</a></h4>
<pre><code class="language-sql">-- OFFSET/LIMIT (медленно для больших OFFSET)
SELECT * FROM table_name 
ORDER BY id 
LIMIT 20 OFFSET 100;

-- Курсорная пагинация (быстрее)
SELECT * FROM table_name 
WHERE id &gt; last_seen_id 
ORDER BY id 
LIMIT 20;
</code></pre>
<h4 id="duplicate-handling"><a class="header" href="#duplicate-handling">Duplicate handling</a></h4>
<pre><code class="language-sql">-- Найти дубликаты
SELECT email, COUNT(*) 
FROM users 
GROUP BY email 
HAVING COUNT(*) &gt; 1;

-- Удалить дубликаты (оставить первый)
DELETE FROM users a USING users b 
WHERE a.id &gt; b.id 
AND a.email = b.email;
</code></pre>
<h4 id="Условная-вставка"><a class="header" href="#Условная-вставка">Условная вставка</a></h4>
<pre><code class="language-sql">-- INSERT если не существует
INSERT INTO table_name (column1, column2) 
SELECT 'value1', 'value2' 
WHERE NOT EXISTS (
    SELECT 1 FROM table_name 
    WHERE column1 = 'value1'
);

-- UPSERT (PostgreSQL 9.5+)
INSERT INTO table_name (id, name) 
VALUES (1, 'John') 
ON CONFLICT (id) 
DO UPDATE SET name = EXCLUDED.name;
</code></pre>
<h3 id="Полезные-функции-postgresql"><a class="header" href="#Полезные-функции-postgresql">Полезные функции PostgreSQL</a></h3>
<h4 id="Работа-с-json"><a class="header" href="#Работа-с-json">Работа с JSON</a></h4>
<pre><code class="language-sql">-- Извлечение значения из JSON
SELECT data-&gt;&gt;'name' FROM table_name;

-- Извлечение вложенного значения
SELECT data-&gt;'address'-&gt;&gt;'city' FROM table_name;

-- Поиск в JSON
SELECT * FROM table_name 
WHERE data @&gt; '{"status": "active"}';
</code></pre>
<h4 id="Работа-с-массивами"><a class="header" href="#Работа-с-массивами">Работа с массивами</a></h4>
<pre><code class="language-sql">-- Создание массива
SELECT ARRAY[1, 2, 3, 4];

-- Проверка вхождения в массив
SELECT * FROM table_name 
WHERE 'value' = ANY(array_column);

-- Объединение массивов
SELECT array_cat(array1, array2);
</code></pre>
<h4 id="Генерация-данных"><a class="header" href="#Генерация-данных">Генерация данных</a></h4>
<pre><code class="language-sql">-- Серия чисел
SELECT generate_series(1, 100);

-- Серия дат
SELECT generate_series(
    '2024-01-01'::date,
    '2024-12-31'::date,
    '1 day'::interval
);

-- Случайные данные
SELECT 
    random() * 100 as random_number,
    md5(random()::text) as random_string;
</code></pre>
<h3 id="Резервное-копирование-и-восстановление"><a class="header" href="#Резервное-копирование-и-восстановление">Резервное копирование и восстановление</a></h3>
<pre><code class="language-bash"># Создание дампа базы данных
pg_dump -U username -h hostname database_name &gt; backup.sql

# Создание сжатого дампа
pg_dump -U username -h hostname -Fc database_name &gt; backup.dump

# Восстановление из SQL файла
psql -U username -h hostname -d database_name &lt; backup.sql

# Восстановление из дампа
pg_restore -U username -h hostname -d database_name backup.dump

# Дамп только схемы
pg_dump -U username -h hostname -s database_name &gt; schema.sql

# Дамп только данных
pg_dump -U username -h hostname -a database_name &gt; data.sql
</code></pre>
<h3 id="Управление-пользователями"><a class="header" href="#Управление-пользователями">Управление пользователями</a></h3>
<pre><code class="language-sql">-- Создание пользователя
CREATE USER username WITH PASSWORD 'password';

-- Создание роли
CREATE ROLE rolename;

-- Предоставление прав
GRANT SELECT, INSERT, UPDATE, DELETE ON table_name TO username;
GRANT ALL PRIVILEGES ON DATABASE database_name TO username;

-- Удаление пользователя
DROP USER username;

-- Изменение пароля
ALTER USER username WITH PASSWORD 'new_password';
</code></pre>
<h3 id="Настройки-конфигурации"><a class="header" href="#Настройки-конфигурации">Настройки конфигурации</a></h3>
<pre><code class="language-sql">-- Просмотр настроек
SHOW ALL;
SHOW work_mem;

-- Изменение настроек (для сессии)
SET work_mem = '256MB';

-- Перезагрузка конфигурации
SELECT pg_reload_conf();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Примеры-кода"><a class="header" href="#Примеры-кода">Примеры кода</a></h1>
<h2 id="Реальные-сценарии-использования-sql"><a class="header" href="#Реальные-сценарии-использования-sql">Реальные сценарии использования SQL</a></h2>
<h3 id="e-commerce-приложение"><a class="header" href="#e-commerce-приложение">E-commerce приложение</a></h3>
<h4 id="Схема-базы-данных"><a class="header" href="#Схема-базы-данных">Схема базы данных</a></h4>
<pre><code class="language-sql">-- Пользователи
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Категории товаров
CREATE TABLE categories (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    parent_id INTEGER REFERENCES categories(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Товары
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    category_id INTEGER REFERENCES categories(id),
    stock_quantity INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Заказы
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    status VARCHAR(20) DEFAULT 'pending',
    total_amount DECIMAL(10, 2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Позиции заказа
CREATE TABLE order_items (
    id SERIAL PRIMARY KEY,
    order_id INTEGER REFERENCES orders(id),
    product_id INTEGER REFERENCES products(id),
    quantity INTEGER NOT NULL,
    price DECIMAL(10, 2) NOT NULL
);
</code></pre>
<h4 id="Аналитические-запросы"><a class="header" href="#Аналитические-запросы">Аналитические запросы</a></h4>
<h5 id="Топ-продаж-за-месяц"><a class="header" href="#Топ-продаж-за-месяц">Топ продаж за месяц</a></h5>
<pre><code class="language-sql">SELECT 
    p.name,
    SUM(oi.quantity) as total_sold,
    SUM(oi.quantity * oi.price) as revenue
FROM products p
JOIN order_items oi ON p.id = oi.product_id
JOIN orders o ON oi.order_id = o.id
WHERE o.created_at &gt;= DATE_TRUNC('month', CURRENT_DATE)
    AND o.status = 'completed'
GROUP BY p.id, p.name
ORDER BY revenue DESC
LIMIT 10;
</code></pre>
<h5 id="Активность-пользователей"><a class="header" href="#Активность-пользователей">Активность пользователей</a></h5>
<pre><code class="language-sql">WITH user_stats AS (
    SELECT 
        u.id,
        u.email,
        COUNT(o.id) as orders_count,
        SUM(o.total_amount) as total_spent,
        MAX(o.created_at) as last_order_date
    FROM users u
    LEFT JOIN orders o ON u.id = o.user_id 
        AND o.status = 'completed'
    GROUP BY u.id, u.email
)
SELECT 
    email,
    orders_count,
    total_spent,
    last_order_date,
    CASE 
        WHEN last_order_date &gt;= CURRENT_DATE - INTERVAL '30 days' THEN 'Active'
        WHEN last_order_date &gt;= CURRENT_DATE - INTERVAL '90 days' THEN 'At Risk'
        WHEN orders_count &gt; 0 THEN 'Inactive'
        ELSE 'New'
    END as user_segment
FROM user_stats
ORDER BY total_spent DESC NULLS LAST;
</code></pre>
<h5 id="Когортный-анализ"><a class="header" href="#Когортный-анализ">Когортный анализ</a></h5>
<pre><code class="language-sql">WITH first_orders AS (
    SELECT 
        user_id,
        DATE_TRUNC('month', MIN(created_at)) as cohort_month
    FROM orders
    WHERE status = 'completed'
    GROUP BY user_id
),
user_activities AS (
    SELECT 
        fo.cohort_month,
        DATE_TRUNC('month', o.created_at) as activity_month,
        COUNT(DISTINCT o.user_id) as active_users
    FROM first_orders fo
    JOIN orders o ON fo.user_id = o.user_id
    WHERE o.status = 'completed'
    GROUP BY fo.cohort_month, DATE_TRUNC('month', o.created_at)
),
cohort_sizes AS (
    SELECT 
        cohort_month,
        COUNT(DISTINCT user_id) as cohort_size
    FROM first_orders
    GROUP BY cohort_month
)
SELECT 
    cs.cohort_month,
    ua.activity_month,
    cs.cohort_size,
    ua.active_users,
    ROUND(
        100.0 * ua.active_users / cs.cohort_size, 2
    ) as retention_rate
FROM cohort_sizes cs
JOIN user_activities ua ON cs.cohort_month = ua.cohort_month
ORDER BY cs.cohort_month, ua.activity_month;
</code></pre>
<h3 id="Система-управления-контентом"><a class="header" href="#Система-управления-контентом">Система управления контентом</a></h3>
<h4 id="Схема-для-блога"><a class="header" href="#Схема-для-блога">Схема для блога</a></h4>
<pre><code class="language-sql">-- Авторы
CREATE TABLE authors (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    bio TEXT,
    avatar_url VARCHAR(500),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Статьи
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    slug VARCHAR(255) UNIQUE NOT NULL,
    content TEXT NOT NULL,
    excerpt TEXT,
    author_id INTEGER REFERENCES authors(id),
    status VARCHAR(20) DEFAULT 'draft',
    published_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Теги
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL,
    slug VARCHAR(50) UNIQUE NOT NULL
);

-- Связь статей и тегов
CREATE TABLE post_tags (
    post_id INTEGER REFERENCES posts(id) ON DELETE CASCADE,
    tag_id INTEGER REFERENCES tags(id) ON DELETE CASCADE,
    PRIMARY KEY (post_id, tag_id)
);

-- Комментарии
CREATE TABLE comments (
    id SERIAL PRIMARY KEY,
    post_id INTEGER REFERENCES posts(id) ON DELETE CASCADE,
    author_name VARCHAR(100) NOT NULL,
    author_email VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    is_approved BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
</code></pre>
<h4 id="Запросы-для-блога"><a class="header" href="#Запросы-для-блога">Запросы для блога</a></h4>
<h5 id="Получение-статей-с-тегами"><a class="header" href="#Получение-статей-с-тегами">Получение статей с тегами</a></h5>
<pre><code class="language-sql">SELECT 
    p.id,
    p.title,
    p.slug,
    p.excerpt,
    a.username as author,
    p.published_at,
    STRING_AGG(t.name, ', ' ORDER BY t.name) as tags
FROM posts p
JOIN authors a ON p.author_id = a.id
LEFT JOIN post_tags pt ON p.id = pt.post_id
LEFT JOIN tags t ON pt.tag_id = t.id
WHERE p.status = 'published' 
    AND p.published_at &lt;= CURRENT_TIMESTAMP
GROUP BY p.id, p.title, p.slug, p.excerpt, a.username, p.published_at
ORDER BY p.published_at DESC;
</code></pre>
<h5 id="Поиск-по-содержимому"><a class="header" href="#Поиск-по-содержимому">Поиск по содержимому</a></h5>
<pre><code class="language-sql">SELECT 
    p.id,
    p.title,
    p.excerpt,
    a.username as author,
    ts_rank(
        to_tsvector('russian', p.title || ' ' || p.content),
        plainto_tsquery('russian', 'поисковый запрос')
    ) as rank
FROM posts p
JOIN authors a ON p.author_id = a.id
WHERE p.status = 'published'
    AND to_tsvector('russian', p.title || ' ' || p.content) 
        @@ plainto_tsquery('russian', 'поисковый запрос')
ORDER BY rank DESC, p.published_at DESC;
</code></pre>
<h3 id="Система-финансового-учета"><a class="header" href="#Система-финансового-учета">Система финансового учета</a></h3>
<h4 id="Схема-для-двойной-записи"><a class="header" href="#Схема-для-двойной-записи">Схема для двойной записи</a></h4>
<pre><code class="language-sql">-- Счета
CREATE TABLE accounts (
    id SERIAL PRIMARY KEY,
    code VARCHAR(20) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    account_type VARCHAR(20) NOT NULL, -- 'asset', 'liability', 'equity', 'revenue', 'expense'
    parent_id INTEGER REFERENCES accounts(id),
    is_active BOOLEAN DEFAULT true
);

-- Проводки
CREATE TABLE transactions (
    id SERIAL PRIMARY KEY,
    transaction_date DATE NOT NULL,
    description TEXT NOT NULL,
    reference VARCHAR(100),
    created_by INTEGER, -- user_id
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Записи в проводках
CREATE TABLE journal_entries (
    id SERIAL PRIMARY KEY,
    transaction_id INTEGER REFERENCES transactions(id),
    account_id INTEGER REFERENCES accounts(id),
    debit DECIMAL(15, 2) DEFAULT 0,
    credit DECIMAL(15, 2) DEFAULT 0,
    CONSTRAINT check_debit_or_credit CHECK (
        (debit &gt; 0 AND credit = 0) OR (credit &gt; 0 AND debit = 0)
    )
);

-- Проверка баланса на уровне транзакции
CREATE OR REPLACE FUNCTION check_transaction_balance()
RETURNS TRIGGER AS $$
BEGIN
    IF (SELECT SUM(debit) - SUM(credit) 
        FROM journal_entries 
        WHERE transaction_id = NEW.transaction_id) != 0 THEN
        RAISE EXCEPTION 'Transaction does not balance';
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER transaction_balance_check
    AFTER INSERT OR UPDATE OR DELETE ON journal_entries
    FOR EACH ROW EXECUTE FUNCTION check_transaction_balance();
</code></pre>
<h4 id="Финансовые-отчеты"><a class="header" href="#Финансовые-отчеты">Финансовые отчеты</a></h4>
<h5 id="Баланс-счетов"><a class="header" href="#Баланс-счетов">Баланс счетов</a></h5>
<pre><code class="language-sql">WITH account_balances AS (
    SELECT 
        a.id,
        a.code,
        a.name,
        a.account_type,
        SUM(je.debit - je.credit) as balance
    FROM accounts a
    LEFT JOIN journal_entries je ON a.id = je.account_id
    JOIN transactions t ON je.transaction_id = t.id
    WHERE t.transaction_date &lt;= CURRENT_DATE
    GROUP BY a.id, a.code, a.name, a.account_type
)
SELECT 
    account_type,
    code,
    name,
    balance,
    CASE 
        WHEN account_type IN ('asset', 'expense') AND balance &gt;= 0 THEN balance
        WHEN account_type IN ('asset', 'expense') AND balance &lt; 0 THEN 0
        WHEN account_type IN ('liability', 'equity', 'revenue') AND balance &lt;= 0 THEN ABS(balance)
        ELSE 0
    END as normal_balance
FROM account_balances
WHERE balance != 0
ORDER BY account_type, code;
</code></pre>
<h3 id="Система-аналитики-веб-сайта"><a class="header" href="#Система-аналитики-веб-сайта">Система аналитики веб-сайта</a></h3>
<h4 id="Схема-для-отслеживания-событий"><a class="header" href="#Схема-для-отслеживания-событий">Схема для отслеживания событий</a></h4>
<pre><code class="language-sql">-- Пользователи (анонимные и зарегистрированные)
CREATE TABLE analytics_users (
    id SERIAL PRIMARY KEY,
    user_id INTEGER, -- ссылка на registered user, если есть
    session_id VARCHAR(255) NOT NULL,
    ip_address INET,
    user_agent TEXT,
    first_seen TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_seen TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- События
CREATE TABLE events (
    id BIGSERIAL PRIMARY KEY,
    user_session_id INTEGER REFERENCES analytics_users(id),
    event_type VARCHAR(50) NOT NULL,
    page_url TEXT,
    referrer_url TEXT,
    properties JSONB,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Индексы для аналитики
CREATE INDEX idx_events_timestamp ON events(timestamp);
CREATE INDEX idx_events_type_timestamp ON events(event_type, timestamp);
CREATE INDEX idx_events_properties ON events USING GIN(properties);
</code></pre>
<h4 id="Аналитические-запросы-1"><a class="header" href="#Аналитические-запросы-1">Аналитические запросы</a></h4>
<h5 id="Воронка-конверсии"><a class="header" href="#Воронка-конверсии">Воронка конверсии</a></h5>
<pre><code class="language-sql">WITH funnel_steps AS (
    SELECT 
        user_session_id,
        MIN(CASE WHEN event_type = 'page_view' AND page_url LIKE '%/products%' THEN timestamp END) as viewed_products,
        MIN(CASE WHEN event_type = 'add_to_cart' THEN timestamp END) as added_to_cart,
        MIN(CASE WHEN event_type = 'checkout_started' THEN timestamp END) as started_checkout,
        MIN(CASE WHEN event_type = 'purchase' THEN timestamp END) as completed_purchase
    FROM events
    WHERE timestamp &gt;= CURRENT_DATE - INTERVAL '30 days'
    GROUP BY user_session_id
),
funnel_analysis AS (
    SELECT 
        COUNT(*) FILTER (WHERE viewed_products IS NOT NULL) as step1_viewed,
        COUNT(*) FILTER (WHERE added_to_cart IS NOT NULL) as step2_cart,
        COUNT(*) FILTER (WHERE started_checkout IS NOT NULL) as step3_checkout,
        COUNT(*) FILTER (WHERE completed_purchase IS NOT NULL) as step4_purchase
    FROM funnel_steps
)
SELECT 
    'Viewed Products' as step, step1_viewed as users, 100.0 as conversion_rate
FROM funnel_analysis
UNION ALL
SELECT 
    'Added to Cart', step2_cart, 
    ROUND(100.0 * step2_cart / NULLIF(step1_viewed, 0), 2)
FROM funnel_analysis
UNION ALL
SELECT 
    'Started Checkout', step3_checkout,
    ROUND(100.0 * step3_checkout / NULLIF(step2_cart, 0), 2)
FROM funnel_analysis
UNION ALL
SELECT 
    'Completed Purchase', step4_purchase,
    ROUND(100.0 * step4_purchase / NULLIF(step3_checkout, 0), 2)
FROM funnel_analysis;
</code></pre>
<h5 id="Анализ-поведения-пользователей"><a class="header" href="#Анализ-поведения-пользователей">Анализ поведения пользователей</a></h5>
<pre><code class="language-sql">SELECT 
    DATE_TRUNC('hour', timestamp) as hour,
    COUNT(*) as total_events,
    COUNT(DISTINCT user_session_id) as unique_sessions,
    COUNT(*) FILTER (WHERE event_type = 'page_view') as page_views,
    COUNT(*) FILTER (WHERE event_type = 'purchase') as purchases,
    AVG(EXTRACT(EPOCH FROM (
        MAX(timestamp) OVER (PARTITION BY user_session_id) - 
        MIN(timestamp) OVER (PARTITION BY user_session_id)
    ))) as avg_session_duration
FROM events
WHERE timestamp &gt;= CURRENT_DATE - INTERVAL '24 hours'
GROUP BY DATE_TRUNC('hour', timestamp)
ORDER BY hour;
</code></pre>
<h3 id="Полезные-оптимизации"><a class="header" href="#Полезные-оптимизации">Полезные оптимизации</a></h3>
<h4 id="Партиционирование-по-времени"><a class="header" href="#Партиционирование-по-времени">Партиционирование по времени</a></h4>
<pre><code class="language-sql">-- Создание партиционированной таблицы
CREATE TABLE events_partitioned (
    id BIGSERIAL,
    user_session_id INTEGER,
    event_type VARCHAR(50) NOT NULL,
    page_url TEXT,
    properties JSONB,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) PARTITION BY RANGE (timestamp);

-- Создание партиций
CREATE TABLE events_2024_01 PARTITION OF events_partitioned
    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');

CREATE TABLE events_2024_02 PARTITION OF events_partitioned
    FOR VALUES FROM ('2024-02-01') TO ('2024-03-01');
</code></pre>
<h4 id="Материализованные-представления"><a class="header" href="#Материализованные-представления">Материализованные представления</a></h4>
<pre><code class="language-sql">-- Ежедневная статистика
CREATE MATERIALIZED VIEW daily_stats AS
SELECT 
    DATE(timestamp) as date,
    COUNT(*) as total_events,
    COUNT(DISTINCT user_session_id) as unique_sessions,
    COUNT(*) FILTER (WHERE event_type = 'purchase') as purchases,
    SUM((properties-&gt;&gt;'revenue')::NUMERIC) FILTER (WHERE event_type = 'purchase') as revenue
FROM events
GROUP BY DATE(timestamp);

-- Создание индекса
CREATE UNIQUE INDEX ON daily_stats (date);

-- Обновление (можно запускать по cron)
REFRESH MATERIALIZED VIEW CONCURRENTLY daily_stats;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="Часто-задаваемые-вопросы"><a class="header" href="#Часто-задаваемые-вопросы">Часто задаваемые вопросы</a></h1>
<h2 id="Общие-вопросы-о-курсе"><a class="header" href="#Общие-вопросы-о-курсе">Общие вопросы о курсе</a></h2>
<h3 id="Подходит-ли-курс-начинающим"><a class="header" href="#Подходит-ли-курс-начинающим">Подходит ли курс начинающим?</a></h3>
<p>Да, курс рассчитан на разный уровень подготовки. Модуль 00 и 01 подходят для полных новичков в SQL. Желательно иметь базовые знания программирования, но это не обязательно.</p>
<h3 id="Какие-знания-нужны-для-прохождения-курса"><a class="header" href="#Какие-знания-нужны-для-прохождения-курса">Какие знания нужны для прохождения курса?</a></h3>
<ul>
<li>Базовое понимание того, что такое база данных</li>
<li>Умение работать с командной строкой (базовый уровень)</li>
<li>Желательно: опыт программирования на любом языке</li>
<li>Желательно: понимание основ веб-разработки</li>
</ul>
<h3 id="Сколько-времени-нужно-уделять-курсу"><a class="header" href="#Сколько-времени-нужно-уделять-курсу">Сколько времени нужно уделять курсу?</a></h3>
<ul>
<li><strong>Минимум</strong>: 5-7 часов в неделю</li>
<li><strong>Оптимально</strong>: 8-12 часов в неделю</li>
<li><strong>Интенсивный режим</strong>: 15+ часов в неделю</li>
</ul>
<h2 id="Технические-вопросы"><a class="header" href="#Технические-вопросы">Технические вопросы</a></h2>
<h3 id="Какую-версию-postgresql-использовать"><a class="header" href="#Какую-версию-postgresql-использовать">Какую версию PostgreSQL использовать?</a></h3>
<p>Рекомендуется PostgreSQL 14 или выше. Курс протестирован на версиях 14, 15 и 16.</p>
<h3 id="Можно-ли-использовать-другую-СУБД-вместо-postgresql"><a class="header" href="#Можно-ли-использовать-другую-СУБД-вместо-postgresql">Можно ли использовать другую СУБД вместо PostgreSQL?</a></h3>
<p>Базовые модули (00-01) будут работать с любой SQL СУБД, но для продвинутых модулей нужен именно PostgreSQL из-за специфических функций.</p>
<h3 id="Что-делать-если-postgresql-не-устанавливается"><a class="header" href="#Что-делать-если-postgresql-не-устанавливается">Что делать, если PostgreSQL не устанавливается?</a></h3>
<ol>
<li>Проверьте <a href="docs/installation-guide.html">руководство по установке</a></li>
<li>Попробуйте использовать Docker:
<pre><code class="language-bash">docker run --name postgres-course -e POSTGRES_PASSWORD=mypassword -p 5432:5432 -d postgres:16
</code></pre>
</li>
<li>Обратитесь за помощью в чат курса</li>
</ol>
<h3 id="Какой-клиент-лучше-использовать"><a class="header" href="#Какой-клиент-лучше-использовать">Какой клиент лучше использовать?</a></h3>
<ul>
<li><strong>Начинающим</strong>: pgAdmin 4 (графический интерфейс)</li>
<li><strong>Опытным</strong>: psql (командная строка) или DBeaver</li>
<li><strong>Разработчикам</strong>: DataGrip или расширения для VS Code</li>
</ul>
<h2 id="Вопросы-по-содержанию"><a class="header" href="#Вопросы-по-содержанию">Вопросы по содержанию</a></h2>
<h3 id="Чем-этот-курс-отличается-от-других-sql-курсов"><a class="header" href="#Чем-этот-курс-отличается-от-других-sql-курсов">Чем этот курс отличается от других SQL курсов?</a></h3>
<ul>
<li>Фокус на практическом применении в разработке</li>
<li>Реальные проекты вместо абстрактных примеров</li>
<li>Углубленное изучение PostgreSQL</li>
<li>Интеграция с современными технологиями (ORM, миграции)</li>
</ul>
<h3 id="Покрываются-ли-темы-nosql"><a class="header" href="#Покрываются-ли-темы-nosql">Покрываются ли темы NoSQL?</a></h3>
<p>Нет, курс полностью посвящен реляционным базам данных и SQL. Однако мы изучаем работу с JSON в PostgreSQL, что дает понимание гибридных подходов.</p>
<h3 id="Есть-ли-материалы-по-конкретным-фреймворкам"><a class="header" href="#Есть-ли-материалы-по-конкретным-фреймворкам">Есть ли материалы по конкретным фреймворкам?</a></h3>
<p>Курс не привязан к конкретным фреймворкам, но в модуле 04 рассматриваются общие принципы работы с ORM на примере популярных решений.</p>
<h2 id="Практические-вопросы"><a class="header" href="#Практические-вопросы">Практические вопросы</a></h2>
<h3 id="Где-взять-данные-для-практики"><a class="header" href="#Где-взять-данные-для-практики">Где взять данные для практики?</a></h3>
<ul>
<li>В курсе предоставляются готовые датасеты</li>
<li>Можно использовать открытые данные (kaggle.com, data.gov)</li>
<li>Создавать собственные тестовые данные</li>
</ul>
<h3 id="Можно-ли-использовать-данные-своей-компании"><a class="header" href="#Можно-ли-использовать-данные-своей-компании">Можно ли использовать данные своей компании?</a></h3>
<p>Да, но убедитесь, что у вас есть разрешение и данные обезличены. Лучше начать с учебных датасетов.</p>
<h3 id="Как-проверить-правильность-решений"><a class="header" href="#Как-проверить-правильность-решений">Как проверить правильность решений?</a></h3>
<ul>
<li>В каждом модуле есть эталонные решения</li>
<li>Используйте <code>EXPLAIN ANALYZE</code> для сравнения производительности</li>
<li>Задавайте вопросы в чате курса</li>
</ul>
<h2 id="Карьерные-вопросы"><a class="header" href="#Карьерные-вопросы">Карьерные вопросы</a></h2>
<h3 id="Поможет-ли-курс-получить-работу"><a class="header" href="#Поможет-ли-курс-получить-работу">Поможет ли курс получить работу?</a></h3>
<p>Курс дает практические навыки, востребованные работодателями. SQL - один из самых популярных навыков в IT. Однако успех зависит от вашего общего профиля и усилий.</p>
<h3 id="Какие-позиции-можно-получить-после-курса"><a class="header" href="#Какие-позиции-можно-получить-после-курса">Какие позиции можно получить после курса?</a></h3>
<ul>
<li>Backend разработчик</li>
<li>Data Analyst / Data Scientist</li>
<li>Database Developer / DBA</li>
<li>DevOps Engineer</li>
<li>QA Engineer</li>
</ul>
<h3 id="Нужно-ли-знать-sql-для-frontend-разработчика"><a class="header" href="#Нужно-ли-знать-sql-для-frontend-разработчика">Нужно ли знать SQL для frontend разработчика?</a></h3>
<p>Да, знание SQL полезно всем разработчикам для:</p>
<ul>
<li>Понимания архитектуры приложения</li>
<li>Отладки проблем с данными</li>
<li>Работы с аналитикой</li>
<li>Карьерного роста</li>
</ul>
<h2 id="Проблемы-и-решения"><a class="header" href="#Проблемы-и-решения">Проблемы и решения</a></h2>
<h3 id="Запрос-работает-медленно"><a class="header" href="#Запрос-работает-медленно">Запрос работает медленно</a></h3>
<ol>
<li>Используйте <code>EXPLAIN ANALYZE</code> для анализа</li>
<li>Проверьте наличие нужных индексов</li>
<li>Оптимизируйте условия WHERE</li>
<li>Рассмотрите переписывание запроса</li>
</ol>
<h3 id="Ошибка-relation-does-not-exist"><a class="header" href="#Ошибка-relation-does-not-exist">Ошибка "relation does not exist"</a></h3>
<ul>
<li>Проверьте правильность имени таблицы</li>
<li>Убедитесь, что подключены к правильной базе данных</li>
<li>Проверьте схему (schema) таблицы</li>
</ul>
<h3 id="Ошибка-permission-denied"><a class="header" href="#Ошибка-permission-denied">Ошибка "permission denied"</a></h3>
<ul>
<li>Проверьте права пользователя на таблицу</li>
<li>Убедитесь, что используете правильные credentials</li>
<li>Обратитесь к администратору БД</li>
</ul>
<h3 id="Данные-не-обновляются"><a class="header" href="#Данные-не-обновляются">Данные не обновляются</a></h3>
<ul>
<li>Проверьте условие WHERE в UPDATE</li>
<li>Убедитесь, что транзакция закоммичена</li>
<li>Проверьте блокировки таблицы</li>
</ul>
<h2 id="Дополнительные-ресурсы"><a class="header" href="#Дополнительные-ресурсы">Дополнительные ресурсы</a></h2>
<h3 id="Книги-для-дополнительного-изучения"><a class="header" href="#Книги-для-дополнительного-изучения">Книги для дополнительного изучения</a></h3>
<ul>
<li>"PostgreSQL: Up and Running" - Regina Obe, Leo Hsu</li>
<li>"Learning SQL" - Alan Beaulieu</li>
<li>"High Performance PostgreSQL" - Gregory Smith</li>
</ul>
<h3 id="Полезные-сайты"><a class="header" href="#Полезные-сайты">Полезные сайты</a></h3>
<ul>
<li><a href="https://www.postgresql.org/docs/">PostgreSQL Documentation</a></li>
<li><a href="https://www.w3schools.com/sql/">SQL Tutorial - W3Schools</a></li>
<li><a href="https://www.postgresqltutorial.com/">PostgreSQL Tutorial</a></li>
</ul>
<h3 id="Сообщества"><a class="header" href="#Сообщества">Сообщества</a></h3>
<ul>
<li><a href="https://postgres-slack.herokuapp.com/">PostgreSQL Slack</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/postgresql">Stack Overflow - PostgreSQL</a></li>
<li><a href="https://www.reddit.com/r/PostgreSQL/">Reddit - r/PostgreSQL</a></li>
</ul>
<h2 id="Обратная-связь"><a class="header" href="#Обратная-связь">Обратная связь</a></h2>
<h3 id="Как-сообщить-об-ошибке-в-материалах"><a class="header" href="#Как-сообщить-об-ошибке-в-материалах">Как сообщить об ошибке в материалах?</a></h3>
<ol>
<li>Создайте issue в GitHub репозитории</li>
<li>Напишите в чат курса</li>
<li>Отправьте email наставнику</li>
</ol>
<h3 id="Как-предложить-улучшение"><a class="header" href="#Как-предложить-улучшение">Как предложить улучшение?</a></h3>
<p>Мы открыты для предложений! Используйте те же каналы, что и для сообщения об ошибках.</p>
<h3 id="Будут-ли-обновления-курса"><a class="header" href="#Будут-ли-обновления-курса">Будут ли обновления курса?</a></h3>
<p>Да, курс регулярно обновляется с учетом:</p>
<ul>
<li>Новых версий PostgreSQL</li>
<li>Изменений в индустрии</li>
<li>Обратной связи от студентов</li>
</ul>
<hr />
<p><em>Не нашли ответ на свой вопрос? Задайте его в чате курса или создайте issue на GitHub!</em></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/sql-playground.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
